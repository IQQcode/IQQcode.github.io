(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{578:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"_1-注解开发使用事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-注解开发使用事项"}},[t._v("#")]),t._v(" 1. 注解开发使用事项")]),t._v(" "),s("p",[s("strong",[t._v("为什么注解一句话等同于映射配置文件")])]),t._v(" "),s("p",[t._v("修饰的谁")]),t._v(" "),s("ul",[s("li",[t._v("注解：修饰"),s("code",[t._v("findAll()")])]),t._v(" "),s("li",[t._v("XML：修饰id为"),s("code",[t._v("findAll()")])])]),t._v(" "),s("p",[t._v("执行的SQL语句")]),t._v(" "),s("ul",[s("li",[t._v("注解、XML都相同")])]),t._v(" "),s("p",[t._v("封装的结果")]),t._v(" "),s("ul",[s("li",[t._v("注解：方法的返回类型")]),t._v(" "),s("li",[t._v("XML：resultType中的类型")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200421174801.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2-如果注解和xml同时存在"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-如果注解和xml同时存在"}},[t._v("#")]),t._v(" 2. 如果注解和XML同时存在")]),t._v(" "),s("p",[s("strong",[t._v("使用注解开发，映射配置IUserDao.xml文件存在但不使用")]),t._v("——"),s("strong",[s("font",{attrs:{color:"red"}},[t._v("运行出错")])],1)]),t._v(" "),s("p",[s("kbd",[t._v("SqlMapConfig")]),t._v("主配置文件")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200421185123.png",alt:""}})]),t._v(" "),s("p",[s("strong",[s("font",{attrs:{color:"red"}},[t._v("报错信息")])],1)]),t._v(" "),s("div",{staticClass:"language-verilog line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-verilog"}},[s("code",[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ibatis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exceptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersistenceException"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n### Error building SqlSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n### The error may exist in org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iqqcode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dao"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("IUserDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xml\n### Cause"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ibatis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("builder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BuilderException"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Error parsing SQL Mapper Configuration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Cause"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IllegalArgumentException"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Mapped Statements collection already contains value "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iqqcode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IUserDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findAll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" please check org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iqqcode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dao"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("IUserDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xml "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iqqcode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dao"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("IUserDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("best guess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[s("strong",[t._v("只要使用注解开发，如果在配置文件路径下同时包含了映射配置文件，无论使用与否，都会报错")])]),t._v(" "),s("p",[t._v("所以，如果使用注解开发，只需要添加主配置文件即可！")]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200421190054.png"}}),t._v(" "),s("h3",{attrs:{id:"_3-复杂关系映射的注解说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-复杂关系映射的注解说明"}},[t._v("#")]),t._v(" 3. 复杂关系映射的注解说明")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("@Results")]),t._v("注解 代替的是标签<resultMap>")])]),t._v(" "),s("ul",[s("li",[t._v("该注解中可以使用单个"),s("code",[t._v("@Result")]),t._v("注解，也可以使用"),s("code",[t._v("@Result集合")])])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Results")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 或 "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Results")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("hr"),t._v(" "),s("p",[t._v("**"),s("code",[t._v("@Result")]),t._v("注解 代替了<id>标签和<result>标签 **")]),t._v(" "),s("p",[t._v("@Result中属性介绍：")]),t._v(" "),s("ul",[s("li",[t._v("id 是否是主键字段(boolen)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("column 数据库的列名")])]),t._v(" "),s("li",[s("p",[t._v("property需要装配的属性名")])]),t._v(" "),s("li",[s("p",[t._v("one 需要使用的"),s("code",[t._v("@One")]),t._v("注解")])]),t._v(" "),s("li",[s("p",[t._v("many 需要使用的"),s("code",[t._v("@Many")]),t._v("注解")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("@One注解（一对一） 代替了<assocation>标签，是多表查询的关键，在注解中用来指定子查询返回单一对象")])]),t._v(" "),s("p",[t._v("@One注解属性介绍：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("select 指定用来多表查询的 sqlmapper")])]),t._v(" "),s("li",[s("p",[t._v("fetchType 会覆盖全局的配置参数 lazyLoadingEnabled (延迟加载)")])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("@Many注解（一对多） 代替了<collection>标签，是多表查询的关键，在注解中用来指定子查询返回对象集合")])]),t._v(" "),s("blockquote",[s("p",[t._v("注意：聚集元素用来处理 “一对多” 的关系。需要指定映射的Java实体类的属性，属性的 javaType（一般为ArrayList）但是注解中可以不定义；")])]),t._v(" "),s("h4",{attrs:{id:"实体类属性与数据库表字段不对应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实体类属性与数据库表字段不对应"}},[t._v("#")]),t._v(" 实体类属性与数据库表字段不对应")]),t._v(" "),s("p",[t._v("当实体类属性与数据库表字段不对应时，XML配置会在映射配置文件中添加"),s("code",[t._v("<resultMap>")]),t._v("来重新映射关系结构，在注解开发中我们使用"),s("code",[t._v("@Results")]),t._v("集合来重新映射表字段")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200422085356.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200422085540.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"resultmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resultmap"}},[t._v("#")]),t._v(" @ResultMap")]),t._v(" "),s("p",[t._v("XML配置：")]),t._v(" "),s("p",[t._v("resultMap可以用来描述从数据库结果集中来加载对象，有的时候映射过于复杂，我们可以在Mapper中定义resultMap来解决映射问题，可以在IUserDao这样来定义一个"),s("code",[t._v("resultMap")]),t._v("：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200422092822.png",alt:""}})]),t._v(" "),s("p",[t._v("注解配置对比：")]),t._v(" "),s("p",[s("code",[t._v("@Results")]),t._v("中"),s("strong",[t._v("id")]),t._v("是resultMap的唯一标识符，我们在后面引用这个"),s("code",[t._v("@Results")]),t._v("的时候就是通过这个"),s("strong",[t._v("id")]),t._v("来引用，然后还定义了type属性，type属性指明了这个resultMap它对应的是哪个JavaBean。")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("@Result")]),t._v("节点中，id为true表示主键，"),s("code",[t._v("Result")]),t._v("节点定义了普通的映射关系，这里的property表示JavaBean中的属性名称，column表示数据库中的字段名称，javaType代表JavaBean中该属性的类型，jdbcType则表示数据库中该字段的类型")]),t._v(" "),s("p",[s("code",[t._v("@ResultMap")]),t._v("与XML中的"),s("code",[t._v("resultMap")]),t._v("等价，在select查询的时候指定"),s("code",[t._v("@Results")]),s("strong",[t._v("id")]),t._v("即可")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200422093219.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("更多相关resultMap映射器配置细则")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/u012702547/article/details/54562619",target:"_blank",rel:"noopener noreferrer"}},[t._v("mybatis映射器配置"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/u012702547/article/details/54599132",target:"_blank",rel:"noopener noreferrer"}},[t._v("mybatis中resultMap配置细则"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"fetchtype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetchtype"}},[t._v("#")]),t._v(" fetchType")]),t._v(" "),s("p",[t._v("配置延迟加载策略：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200422095250.png",alt:""}})]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("fetchType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FetchType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LAZY")]),t._v("\nfetchType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FetchType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EAGER")]),t._v("\nfetchType "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FetchType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("ul",[s("li",[t._v("当映射关系为一对一时：选择"),s("strong",[t._v("EAGER")]),t._v("加载")]),t._v(" "),s("li",[t._v("当映射关系为一对多或者多对多时：选择"),s("strong",[t._v("LAZY")]),t._v("加载")])])])}),[],!1,null,null,null);s.default=e.exports}}]);