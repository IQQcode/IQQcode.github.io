(window.webpackJsonp=window.webpackJsonp||[]).push([[374],{697:function(_,v,t){"use strict";t.r(v);var s=t(3),a=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h2",{attrs:{id:"_1-mysql体系架构"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql体系架构"}},[_._v("#")]),_._v(" 1. MySQL体系架构")]),_._v(" "),v("h3",{attrs:{id:"mysql体系结构"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#mysql体系结构"}},[_._v("#")]),_._v(" Mysql体系结构")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/20210626232710.jpg",alt:"171214401286615"}})]),_._v(" "),v("p",[_._v("整个MySQL Server由以下组成")]),_._v(" "),v("ul",[v("li",[_._v("Connection Pool : 连接池组件")]),_._v(" "),v("li",[_._v("Management Services & Utilities : 管理服务和工具组件")]),_._v(" "),v("li",[_._v("Pluggable Storage Engines : 存储引擎")]),_._v(" "),v("li",[_._v("File System : 文件系统")])]),_._v(" "),v("p",[v("strong",[_._v("1. 连接层")]),_._v("：客户端和链接服务，引入了线程池的概念主要完成一些类似于连接处理、授权认证、及相关的安全方案。")]),_._v(" "),v("p",[v("strong",[_._v("2. 服务层")]),_._v("：第二层架构主要完成大多数的核心服务功能，如SQL接口，并完成缓存的查询，SQL的分析和优化，部分内置函数的执行。")]),_._v(" "),v("p",[v("strong",[_._v("3. 引擎层")]),_._v("：存储引擎层， 存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过API和存储引擎进行通信。")]),_._v(" "),v("p",[v("strong",[_._v("4. 存储层")]),_._v("：数据存储层， 主要是将数据存储在文件系统之上，并完成与存储引擎的交互")]),_._v(" "),v("br"),_._v(" "),v("h3",{attrs:{id:"存储引擎"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#存储引擎"}},[_._v("#")]),_._v(" 存储引擎")]),_._v(" "),v("p",[v("strong",[_._v("存储引擎就是存储数据，建立索引，更新查询数据等技术的实现方式 。存储引擎是"),v("font",{attrs:{color:"red"}},[_._v("基于表")]),_._v(">的，而不是基于库的。同一个数据库中的不同表，可以选择不同的存储引擎。所以存储引擎也可被称为表类型。")],1)]),_._v(" "),v("p",[_._v("几种常用的存储引擎， 并对比各个存储引擎之间的区别， 如下表所示 ：")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("特点")]),_._v(" "),v("th",[_._v("InnoDB")]),_._v(" "),v("th",[_._v("MyISAM")]),_._v(" "),v("th",[_._v("MEMORY")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("存储限制")]),_._v(" "),v("td",[_._v("64TB")]),_._v(" "),v("td",[_._v("有")]),_._v(" "),v("td",[_._v("有")])]),_._v(" "),v("tr",[v("td",[_._v("事务安全")]),_._v(" "),v("td",[_._v("==支持==")]),_._v(" "),v("td"),_._v(" "),v("td")]),_._v(" "),v("tr",[v("td",[_._v("锁机制")]),_._v(" "),v("td",[_._v("==行锁(适合高并发)==")]),_._v(" "),v("td",[_._v("==表锁==")]),_._v(" "),v("td",[_._v("表锁")])]),_._v(" "),v("tr",[v("td",[_._v("B树索引")]),_._v(" "),v("td",[_._v("支持")]),_._v(" "),v("td",[_._v("支持")]),_._v(" "),v("td",[_._v("支持")])]),_._v(" "),v("tr",[v("td",[_._v("全文索引")]),_._v(" "),v("td",[_._v("支持(5.6之后)")]),_._v(" "),v("td",[_._v("支持")]),_._v(" "),v("td")]),_._v(" "),v("tr",[v("td",[_._v("索引缓存")]),_._v(" "),v("td",[_._v("支持")]),_._v(" "),v("td",[_._v("支持")]),_._v(" "),v("td",[_._v("支持")])]),_._v(" "),v("tr",[v("td",[_._v("支持外键")]),_._v(" "),v("td",[_._v("==支持==")]),_._v(" "),v("td"),_._v(" "),v("td")])])]),_._v(" "),v("div",{staticClass:"language-shell line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-shell"}},[v("code",[_._v("show engines"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(";")]),_._v("\n")])]),_._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[_._v("1")]),v("br")])]),v("p",[v("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/20210626232715.png",alt:"image-20200824150755665"}})]),_._v(" "),v("p",[v("strong",[_._v("📺【引擎的选择】")])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("InnoDB")]),_._v(" "),v("th",[_._v("MyISAM")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("默认选择InnoDB。业务的安全性较高、对数据的一致性要求严格")]),_._v(" "),v("td",[_._v("以读操作和插入操作为主（NoSQL）。对事物和一致性要求不高")])])])]),_._v(" "),v("br"),_._v(" "),v("h2",{attrs:{id:"_2-innodb"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-innodb"}},[_._v("#")]),_._v(" 2. InnoDB")]),_._v(" "),v("h3",{attrs:{id:"innodb的特点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#innodb的特点"}},[_._v("#")]),_._v(" InnoDB的特点")]),_._v(" "),v("p",[_._v("Supports transactions，row-level locking，and foreign keys")]),_._v(" "),v("ul",[v("li",[_._v("支持事务")]),_._v(" "),v("li",[_._v("支持行锁")]),_._v(" "),v("li",[_._v("支持外键（MySQL中唯一支持外建的存储引擎）")])]),_._v(" "),v("br"),_._v(" "),v("h3",{attrs:{id:"innodb索引结构"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#innodb索引结构"}},[_._v("#")]),_._v(" InnoDB索引结构")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/20210626232726.png",alt:""}})]),_._v(" "),v("ul",[v("li",[v("code",[_._v("frm")]),_._v("表结构")]),_._v(" "),v("li",[v("code",[_._v("ibd")]),_._v("索引 + 数据")])]),_._v(" "),v("br"),_._v(" "),v("h3",{attrs:{id:"面试提问"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#面试提问"}},[_._v("#")]),_._v(" 面试提问")]),_._v(" "),v("h4",{attrs:{id:"a-主键提问"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#a-主键提问"}},[_._v("#")]),_._v(" a. 主键提问")]),_._v(" "),v("p",[v("strong",[_._v("为什么InnoDB推荐建表加int类型的主键，主键设为自增长？")])]),_._v(" "),v("p",[_._v("答："),v("strong",[_._v("主键自带索引")]),_._v("，添加主键的原因是为了方便B+树维护索引，自增长的id来唯一定位"),v("code",[_._v("data")]),_._v("在B+树中的位置。使InnoDB表的数据写入顺序和B+树索引的叶子节点顺序一致的话，提高存取效率")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("使用自增列（INT/BIGINT类型）做主键")]),_._v("，写入顺序是自增的，和B+树叶子节点分裂顺序一致，方便二分查找定位索引；")]),_._v(" "),v("li",[v("strong",[_._v("该表不指定自增列做主键")]),_._v("，InnoDB会选择内置的"),v("strong",[_._v("ROWID")]),_._v("作为主键，写入顺序和ROWID增长顺序一致；")])]),_._v(" "),v("blockquote",[v("p",[_._v("https://www.cnblogs.com/moyand/p/9013663.html")])]),_._v(" "),v("br"),_._v(" "),v("h2",{attrs:{id:"_3-myisam"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-myisam"}},[_._v("#")]),_._v(" 3. MyISAM")]),_._v(" "),v("p",[_._v("MyISAM不支持事务、也不支持外键，其"),v("strong",[_._v("优势是访问的速度快")]),_._v("。对事务的完整性没有要求或者"),v("strong",[_._v("以 SELECT、 INSERT为主的应用")]),_._v("基本上都可以使用这个引擎来创建表。")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("不支持事务")])]),_._v(" "),v("li",[v("p",[_._v("不支持行锁🔒")])])]),_._v(" "),v("p",[_._v("MyISAM的叶子节点不存储数据，它是将表的主键索引"),v("code",[_._v("index")]),_._v("存在"),v("strong",[_._v("MYI")]),_._v("表中，叶子节点存放的是"),v("strong",[_._v("MYD")]),_._v("表中数据的地址")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("frm")]),_._v("表结构")]),_._v(" "),v("li",[v("code",[_._v("MYI")]),_._v("主键索引")]),_._v(" "),v("li",[v("code",[_._v("MYD")]),_._v("数据")])]),_._v(" "),v("p",[v("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/20210626232755.png",alt:""}})])])}),[],!1,null,null,null);v.default=a.exports}}]);