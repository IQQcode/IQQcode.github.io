(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{501:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_1-lockä½“ç³»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-lockä½“ç³»"}},[s._v("#")]),s._v(" 1. Lockä½“ç³»")]),s._v(" "),t("h3",{attrs:{id:"lockæ¥å£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lockæ¥å£"}},[s._v("#")]),s._v(" Lockæ¥å£")]),s._v(" "),t("p",[s._v("Lock----JDK5 åŸºäºJavaè¯­è¨€å®ç°çš„çº¿ç¨‹é”")]),s._v(" "),t("p",[t("strong",[s._v("Javaä¸­å®ç°çº¿ç¨‹â€œé”â€çš„æ–¹å¼ï¼š")])]),s._v(" "),t("ul",[t("li",[s._v("synchronized")]),s._v(" "),t("li",[s._v("Lock")])]),s._v(" "),t("p",[s._v("ä¸‹é¢æ¥çœ‹çœ‹Lockæ¥å£ä¸­å®šä¹‰äº†å“ªäº›æ–¹æ³•")]),s._v(" "),t("p",[t("img",{attrs:{src:"8.Lock%E4%BD%93%E7%B3%BB.assets/20200528172946385.png",alt:"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"}})]),s._v(" "),t("ol",[t("li",[t("code",[s._v("void lock();")]),s._v("    è·å–é”")]),s._v(" "),t("li",[t("code",[s._v("void lockInterruptibly();")]),s._v("  è·å–é”çš„è¿‡ç¨‹èƒ½å¤Ÿå“åº”ä¸­æ–­")]),s._v(" "),t("li",[t("code",[s._v("boolean tryLock();")]),s._v("    éé˜»å¡å¼å“åº”ä¸­æ–­èƒ½ç«‹å³è¿”å›ï¼Œè·å–é”è¿”å›trueåä¹‹ä¸ºfalse")]),s._v(" "),t("li",[t("code",[s._v("boolean tryLock(long time,TimeUnit unit);")]),s._v("  è¶…æ—¶è·å–é”ï¼Œåœ¨è¶…æ—¶å†…æˆ–æœªä¸­æ–­çš„æƒ…å†µä¸‹èƒ½è·å–é”")]),s._v(" "),t("li",[t("code",[s._v("Condition newCondition();")]),s._v("   è·å–ä¸lockç»‘å®šçš„ç­‰å¾…é€šçŸ¥ç»„ä»¶ï¼Œå½“å‰çº¿ç¨‹å¿…é¡»å…ˆè·å¾—äº†é”æ‰èƒ½ç­‰å¾…ï¼Œç­‰å¾…ä¼šé‡Šæ”¾é”ï¼Œå†æ¬¡è·å–åˆ°é”æ‰èƒ½ä»ç­‰å¾…ä¸­è¿”å›")])]),s._v(" "),t("p",[t("strong",[s._v("Lockç±»ç›¸å…³ä»‹ç»")])]),s._v(" "),t("ol",[t("li",[s._v("Locké‡è¦çš„å®ç°ç±»ï¼šReentrantLock å’Œ ReentrantReadWriteLockã€‚")]),s._v(" "),t("li",[s._v("Lockï¼šå®šä¹‰äº†æ ‡å‡†çš„Lockçš„apiã€‚")]),s._v(" "),t("li",[s._v("ReentrantLock ï¼šé‡å…¥é”(å®ç°äº†AQS) æ”¯æŒå…¬å¹³å’Œéå…¬å¹³ã€‚")]),s._v(" "),t("li",[s._v("ReentrantReadWriteLockï¼šåŒReentrantLock åœ¨åŸºç¡€ä¸Šæ”¯æŒè¯»å†™åˆ†ç¦»é€‚åˆå¤šè¯»å°‘å†™çš„åœºæ™¯")]),s._v(" "),t("li",[s._v("Conditionï¼šæ˜¯éœ€è¦ä¸Locké…åˆä½¿ç”¨çš„ï¼Œæä¾›å¤šä¸ªç­‰å¾…é›†åˆï¼Œæ›´ç²¾ç¡®çš„æ§åˆ¶(åº•å±‚æ˜¯park/unparkæœºåˆ¶)")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("å¯ä¸­æ–­é”")]),s._v("ï¼šåœ¨ç­‰å¾…è·å–é”è¿‡ç¨‹ä¸­å¯ä¸­æ–­ã€‚æ³¨æ„æ˜¯åœ¨ç­‰å¾…é”è¿‡ç¨‹ä¸­æ‰å¯ä»¥ä¸­æ–­ï¼Œå¦‚æœå·²ç»è·å–äº†é”ï¼Œä¸­æ–­å°±æ— æ•ˆã€‚")])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_2-locké”çš„ä½¿ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-locké”çš„ä½¿ç”¨"}},[s._v("#")]),s._v(" 2. Locké”çš„ä½¿ç”¨")]),s._v(" "),t("p",[s._v("Lockæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå°±ç±»ä¼¼"),t("code",[s._v("List")]),s._v("å’Œ"),t("code",[s._v("Set")]),s._v("æ¥å£ï¼Œå…·ä½“çš„ä½¿ç”¨è¿˜æ˜¯è°ƒç”¨å…¶å®ç°ç±»"),t("strong",[s._v("ReentrantLock(é‡å…¥é”)")])]),s._v(" "),t("p",[t("strong",[s._v("Lockå®ç°ç±»ä»‹ç»")])]),s._v(" "),t("ol",[t("li",[s._v("æ‰€çš„å®ç°ç±»ï¼š"),t("code",[s._v("AQS")]),s._v("(AbstractQueuedSynchronizer)ã€"),t("code",[s._v("ReentrantLock")]),s._v("ã€"),t("code",[s._v("ReentrantReadWriteLock")]),s._v("ã€"),t("code",[s._v("CountDownLatch")]),s._v("ã€"),t("code",[s._v("Semphore")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("å…¶ä»–å¤šçº¿ç¨‹åä½œçš„åœºæ™¯: "),t("code",[s._v("CyclicBarrier")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/20210617213259.png",alt:"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"}})]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("iqqcode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lock")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReentrantLock")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @Author: Mr.Q\n * @Date: 2020-05-28 16:55\n * @Description:Locké”\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Sync")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runnable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å®ç°Lockçš„æ¥å£æ¥å®šä¹‰é”")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lock")]),s._v(" ticketsLock "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReentrantLock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" tickets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éœ€è¦å¯¹ç¨‹åºä¸Šé”")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç­‰åŒäºsynchronized(this)")]),s._v("\n                ticketsLock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tickets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentThread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è¿˜æœ‰"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tickets"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å¼ ç¥¨"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                ticketsLock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unlock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LockSync")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Sync")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Sync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"é»„ç‰›A"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"é»„ç‰›B"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"é»„ç‰›C"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br")])]),t("p",[s._v("å¯ä»¥çœ‹å‡º Lock å¯ä»¥å®ç°å’Œ synchronized åŒæ ·çš„åŠŸèƒ½")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/20210617213304.png",alt:"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"}})]),s._v(" "),t("br"),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_3-condition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-condition"}},[s._v("#")]),s._v(" 3. Condition")]),s._v(" "),t("p",[s._v("Conditionï¼šLockä½“ç³»çš„çº¿ç¨‹é€šä¿¡æ–¹å¼ï¼Œç±»æ¯”Objectç±»çš„ waitï¼Œnotifyï¼›å¯ä»¥è¿›ä¸€éƒ¨æé«˜æ•ˆç‡ï¼Œå‡å°‘çº¿ç¨‹é˜»å¡ä¸å”¤é†’å¸¦æ¥çš„å¼€é”€")]),s._v(" "),t("p",[t("code",[s._v("await()")]),s._v(":  é‡Šæ”¾Locké”ï¼Œå°†çº¿ç¨‹ç½®å…¥ç­‰å¾…é˜Ÿåˆ—é˜»å¡")]),s._v(" "),t("p",[t("code",[s._v("signal()")]),s._v("ï¼š å”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹")]),s._v(" "),t("p",[t("code",[s._v("signalAll()")]),s._v(":  å”¤é†’æ‰€æœ‰çº¿ç¨‹")]),s._v(" "),t("p",[s._v("ç±»æ¯” "),t("strong",[s._v("wait()")]),s._v(" å’Œ "),t("strong",[s._v("notify( ï¼‰")])]),s._v(" "),t("p",[s._v("è·å–ä¸€ä¸ªLocké”çš„Conditioné˜Ÿåˆ—ï¼š")]),s._v(" "),t("p",[t("code",[s._v("Lock.newCondition")]),s._v(" : æ¯å½“è°ƒç”¨ä¸€æ¬¡ï¼Œå°±äº§ç”Ÿä¸€ä¸ªæ–°çš„Condition")]),s._v(" "),t("blockquote",[t("p",[s._v("ä½¿ç”¨è¯¦è§ğŸ‘‰ "),t("strong",[s._v("ã€Š6.çº¿ç¨‹é—´çš„é€šä¿¡ã€‹")])])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_5-ä½¿ç”¨synchronizedè¿˜æ˜¯lock"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-ä½¿ç”¨synchronizedè¿˜æ˜¯lock"}},[s._v("#")]),s._v(" 5. ä½¿ç”¨synchronizedè¿˜æ˜¯Lock")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("Lockæ˜¯æ˜¾ç¤ºé”ï¼Œæ‰‹åŠ¨å…³é—­ï¼Œæ‰‹åŠ¨å¼€å¯ï¼›synchronizedæ˜¯éšå¼é”ï¼Œå‡ºäº†ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾")])]),s._v(" "),t("li",[t("p",[s._v("Lockåªèƒ½ä½œç”¨åŸŸä»£ç å—ï¼Œè€Œsynchronizedå¯ä»¥ä½œç”¨åŸŸä»£ç å—å’Œæ–¹æ³•ä¸Š")])]),s._v(" "),t("li",[t("p",[s._v("ä½¿ç”ªLocké”JVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ï¼Œå¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰")])]),s._v(" "),t("li",[t("p",[s._v("è‹¥æ— ç‰¹æ®Šçš„åº”ç”¨åœºæ™¯ï¼Œæ¨èä½¿ç”¨ "),t("strong",[s._v("synchronized")]),s._v(",å…¶ä½¿ç”¨æ–¹ä¾¿(éšå¼çš„åŠ å‡é”)ï¼Œå¹¶ä¸”ç”±äº synchronizedæ˜¯ JVMå±‚é¢çš„å®ç°ï¼Œåœ¨ä¹‹åçš„ JDKè¿˜æœ‰ä¼˜åŒ–")])]),s._v(" "),t("li",[t("p",[s._v("è‹¥è¦ä½¿ç”¨ "),t("strong",[s._v("å…¬å¹³é”ï¼Œè¯»å†™é”ï¼Œè¶…æ—¶é”")]),s._v("ç­‰ç‰¹æ®Šåœºæ™¯ï¼Œæ‰ä¼šè€ƒè™‘ä½¿ç”¨ Lock")])]),s._v(" "),t("li",[t("p",[s._v("Synchronizedæ˜¯å¯é‡å…¥é”ï¼Œä¸å¯ä»¥ä¸­æ–­çš„ï¼Œéå…¬å¹³ï¼›Lockæ˜¯å¯é‡å…¥é”ï¼Œå¯ä»¥åˆ¤æ–­é”ï¼Œéå…¬å¹³ï¼ˆå¯è®¾ç½®ï¼‰")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);