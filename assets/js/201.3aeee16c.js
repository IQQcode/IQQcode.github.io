(window.webpackJsonp=window.webpackJsonp||[]).push([[201],{528:function(t,s,a){"use strict";a.r(s);var n=a(3),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-å †heap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å †heap"}},[t._v("#")]),t._v(" 1. å †Heap")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200629175321.png",alt:""}})]),t._v(" "),s("p",[t._v("ä¸€ä¸ªè¿›ç¨‹å¯¹åº”ä¸€ä¸ªJVMå®ä¾‹ï¼Œä¸€ä¸ªJVMå®ä¾‹å°±å¯¹åº”ä¸€ä¸ªè¿è¡Œæ—¶æ•°æ®åŒºRutime Data Areaï¼ˆRuntimeç±»æ˜¯é¥¿æ±‰å¼å•ä¾‹ï¼‰ã€‚ä¸€ä¸ªè¿›ç¨‹å¯¹åº”å¤šä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å †ç©ºé—´ï¼Œå…±äº«åŒä¸€ä¸ªæ–¹æ³•åŒºã€‚")]),t._v(" "),s("p",[s("strong",[t._v("åœ¨æ–¹æ³•ç»“æŸåï¼Œå †ä¸­çš„å¯¹è±¡ä¸ä¼šç«‹åˆ»è¢«ç§»é™¤ï¼Œä»…ä»…åœ¨æ‰§è¡Œå¼•æ“åƒåœ¾å›æ”¶çš„æ—¶å€™æ‰ä¼šè¢«ç§»é™¤ã€‚")])]),t._v(" "),s("p",[t._v("å †ï¼Œæ˜¯GCï¼ˆ Garbage Collectionï¼Œåƒåœ¾æ”¶é›†å™¨ï¼‰æ‰§è¡Œåƒåœ¾å›æ”¶çš„é‡ç‚¹åŒºåŸŸã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ‘‰ã€oracleå®˜æ–¹æ–‡æ¡£ã€‘"),s("a",{attrs:{href:"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.4",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Structure of the Java Virtual Machine"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"å †çš„æ ¸å¿ƒ-å†…å­˜ç»†åˆ†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å †çš„æ ¸å¿ƒ-å†…å­˜ç»†åˆ†"}},[t._v("#")]),t._v(" å †çš„æ ¸å¿ƒ-å†…å­˜ç»†åˆ†")]),t._v(" "),s("p",[t._v("ç°ä»£åƒåœ¾å›æ”¶å™¨å¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäºåˆ†ä»£æ‰‹æœºç†è®ºè®¾è®¡ï¼Œå †ç©ºé—´ç»†åˆ†ä¸ºï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("çº¦å®šï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ–°ç”ŸåŒº==>æ–°ç”Ÿä»£==>å¹´è½»ä»£")])]),t._v(" "),s("li",[s("p",[t._v("å…»è€åŒº==>è€å¹´åŒº==>è€å¹´ä»£")])]),t._v(" "),s("li",[s("p",[t._v("æ°¸ä¹…åŒº==>æ°¸ä¹…ä»£")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200629152823.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("JDK 7åŠä¹‹å‰ï¼š")])]),t._v(" "),s("p",[t._v("æ–°ç”Ÿä»£ + è€å¹´ä»£ + "),s("font",{attrs:{color:"green"}},[t._v("æ°¸ä¹…ä»£")])],1),t._v(" "),s("p",[s("strong",[t._v("JDK 8åŠä¹‹åï¼š")])]),t._v(" "),s("p",[t._v("æ–°ç”Ÿä»£+  è€å¹´ä»£ + "),s("font",{attrs:{color:"red"}},[t._v("å…ƒç©ºé—´")])],1),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200629161449.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("å…ƒç©ºé—´ã€æ°¸ä¹…ä»£æ˜¯æ–¹æ³•åŒºå…·ä½“çš„è½åœ°å®ç°")])]),t._v(" "),s("h3",{attrs:{id:"å †ç©ºé—´å¤§å°è®¾ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å †ç©ºé—´å¤§å°è®¾ç½®"}},[t._v("#")]),t._v(" å †ç©ºé—´å¤§å°è®¾ç½®")]),t._v(" "),s("p",[t._v("å †ç”¨æ¥å­˜å‚¨Javaå¯¹è±¡å®ä¾‹ï¼Œå †çš„å¤§å°åœ¨JVMå¯åŠ¨æ—¶å°±å·²ç»è®¾å®šå¥½äº†ã€‚å †ç©ºé—´çš„å¤§å°å¯ä»¥é€šè¿‡ä¸¤ä¸ªå‚æ•°æ¥è®¾ç½®ï¼šï¼ˆ-Xè¡¨ç¤ºè™šæ‹Ÿæœºå‚æ•°ï¼‰")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("-Xms")]),t._v("(memory start)ï¼šå †åŒºèµ·å§‹å†…å­˜")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("-Xmx")]),t._v("(memory max)ï¼šå †åŒºæœ€å¤§å†…å­˜")])])]),t._v(" "),s("p",[t._v("ä¸€æ—¦å †åŒºçš„å†…å­˜è¶…è¿‡"),s("code",[t._v("-Xmx")]),t._v("é”æŒ‡å®šçš„æœ€å¤§å†…å­˜æ—¶ï¼Œä¼šæŠ›å‡º"),s("strong",[t._v("OutOfMemoryError")])]),t._v(" "),s("p",[t._v("é€šå¸¸ä¼šå°†"),s("code",[t._v("-Xms")]),t._v("å’Œ"),s("code",[t._v("-Xmx")]),t._v("ä¸¤ä¸ªå‚æ•°é…ç½®ç›¸åŒçš„å€¼ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨GCåï¼Œä¸éœ€è¦é‡æ–°åˆ†éš”è®¡ç®—å †åŒºçš„å¤§å°ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚")]),t._v(" "),s("p",[t._v("ã€é»˜è®¤æƒ…å†µä¸‹ã€‘")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("åˆå§‹å†…å­˜å¤§å°ï¼šç‰©ç†å†…å­˜çš„ 1 /  64")])]),t._v(" "),s("li",[s("p",[t._v("æœ€å¤§å†…å­˜å¤§å°ï¼šç‰©ç†å†…å­˜çš„ 1 / 4")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_2-æ–°ç”Ÿä»£å’Œè€å¹´ä»£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ–°ç”Ÿä»£å’Œè€å¹´ä»£"}},[t._v("#")]),t._v(" 2. æ–°ç”Ÿä»£å’Œè€å¹´ä»£")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200629173208.png",alt:""}})]),t._v(" "),s("p",[t._v("å…¶ä¸­æ–°ç”Ÿä»£åˆ†ä¸º"),s("strong",[t._v("EdenåŒºã€Suvivor 0åŒºã€Survivor 1åŒº")]),t._v("ï¼ˆæœ‰æ—¶ä¹Ÿå«FromåŒºã€ToåŒºï¼‰")]),t._v(" "),s("blockquote",[s("p",[t._v("å…ƒç©ºé—´ã€æ°¸ä¹…ä»£æ˜¯æ–¹æ³•åŒºå…·ä½“çš„è½åœ°å®ç°")])]),t._v(" "),s("p",[s("strong",[t._v("å †ç©ºé—´å æ¯”åˆ†é…ï¼š")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701174154.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200629173511.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"å¯¹è±¡å†…å­˜åˆ†é…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡å†…å­˜åˆ†é…"}},[t._v("#")]),t._v(" å¯¹è±¡å†…å­˜åˆ†é…")]),t._v(" "),s("p",[t._v("ä¸€ä¸ªå¯¹è±¡è¢«åˆ†é…å†…å­˜ã€åˆ°åˆ›å»ºã€å†åˆ°åˆ°æ¶ˆäº¡ï¼Œå®ƒç»å†äº†æ€æ ·çš„è¿‡ç¨‹å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡è¿™å¼ å›¾ï¼Œæ¥åšå…·ä½“è¯´æ˜ï¼š")]),t._v(" "),s("p",[t._v("ã€æ¦‚å¿µæ˜ç¡®ã€‘ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Eden - ä¼Šç”¸å›­åŒº")])]),t._v(" "),s("li",[s("p",[t._v("Survivor - å¹¸å­˜è€…åŒºï¼ˆSurvivor0 - S0ã€Survivor1 - S1ï¼‰")])]),t._v(" "),s("li",[s("p",[t._v("åƒåœ¾å¯¹è±¡ - ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œå³æ²¡æœ‰æŒ‡å‘çš„å¯¹è±¡")])]),t._v(" "),s("li",[s("p",[t._v("å­˜æ´»çš„å¯¹è±¡ - ä¸æ˜¯åƒåœ¾çš„å¯¹è±¡ï¼ˆè¿˜è¢«ä½¿ç”¨ï¼‰")])]),t._v(" "),s("li",[s("p",[t._v("Tenured/Old - è€å¹´åŒº")])])]),t._v(" "),s("blockquote",[s("p",[t._v("Survivor0 - S0ã€Survivor1 - S1ä¹Ÿç§°"),s("code",[t._v("from")]),t._v("åŒºå’Œ"),s("code",[t._v("to")]),t._v("åŒºã€‚åç§°ä¸æ˜¯å›ºå®šçš„ï¼Œfromæ˜¯æ»¡çš„ä¸€ä¸ªï¼Œtoæ˜¯ç©ºçš„ä¸€ä¸ªã€‚")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701160046.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("å‡è®¾é¦–æ¬¡Survivor0å’ŒSurvivor1å‡ä¸ºç©º")])]),t._v(" "),s("p",[s("strong",[t._v("1. é¦–å…ˆ"),s("code",[t._v("new")]),t._v("å‚ç”Ÿçš„å¯¹è±¡ä¼šæ”¾åˆ°Eden")])]),t._v(" "),s("p",[s("strong",[t._v("2. å½“EdenåŒºç©ºé—´æ»¡äº†æ—¶ï¼Œç¨‹åºåˆéœ€è¦åˆ›å»ºå¯¹è±¡ã€‚YGC/Minor GCï¼ˆå¯è¾¾æ€§åˆ†æç®—æ³•ï¼‰å¯¹EdenåŒºçš„åƒåœ¾å¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œå°†å­˜æ´»çš„å¯¹è±¡æ”¾å…¥åˆ°Survivor0åŒº")]),t._v("ã€‚æ¯ä¸ªå¯¹è±¡çš„å¹´é¾„è®¡æ•°å™¨"),s("code",[t._v("age")]),t._v(" + 1")]),t._v(" "),s("p",[s("strong",[t._v("3. æ­¤æ—¶Edenä¸ºç©ºï¼Œå­˜æ´»çš„å¯¹è±¡æ”¾å…¥åˆ°äº†S0ä¸­")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701164923.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("4. ç»§ç»­åœ¨EdenåŒºåˆ›å»ºæ–°å¯¹è±¡ï¼ŒEdenåŒºå†æ¬¡è£…æ»¡ï¼Œè§¦å‘Minor GC")])]),t._v(" "),s("p",[s("strong",[t._v("5. å†æ¬¡å°†å‰©ä½™å­˜æ´»çš„å¯¹è±¡æ”¾å…¥åˆ°SurvivoråŒºã€‚æ­¤æ—¶ï¼ŒS0å·²æ»¡ï¼Œæ”¾å…¥åˆ°S1ä¸­")])]),t._v(" "),s("p",[s("strong",[t._v("6. åˆ¤æ–­S0åŒºä¸­çš„å¯¹è±¡è¿˜æ˜¯å¦è¢«ä½¿ç”¨ï¼Œå¦‚ä¸ä½¿ç”¨åˆ™å›æ”¶ï¼Œä½¿ç”¨åˆ™æ”¾å…¥åˆ°S1ä¸­ã€‚"),s("code",[t._v("age")]),t._v("è®¡æ•°å™¨+1")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701165132.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("7. æ­¤æ—¶Edenå’ŒS0ä¸ºç©ºï¼Œå­˜æ´»çš„å¯¹è±¡å‡åœ¨S1ä¸­")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701170350.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("æ­¤æ—¶S0ç§°ä¸ºtoåŒºï¼Œs1ç§°ä¸ºfromåŒº")])]),t._v(" "),s("p",[s("strong",[t._v("8. EdenåŒºä¸­å†æ¬¡åˆ›å»ºå¯¹è±¡ç›´è‡³æ»¡ä¸ºæ­¢ï¼Œå­˜æ´»çš„å¯¹è±¡æ”¾å…¥S0ä¸­ï¼ŒåŒæ—¶åˆ¤æ–­S1ä¸­æ˜¯å¦æœ‰å¯å›æ”¶ç­”åƒåœ¾å¯¹è±¡")])]),t._v(" "),s("p",[s("strong",[t._v("9. å½“SurvivoråŒºä¸­æœ‰å¯¹è±¡çš„å¯¹è±¡è®¡æ•°å™¨ageè¾¾åˆ°é˜ˆå€¼15æ—¶ï¼Œå°†å…¶ä»Survivorä¸­æ™‹å‡åˆ°OldåŒº")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701170713.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("é˜ˆå€¼è®¾ç½®å‚æ•°ï¼š-XX:MaxTenuringThresho1d="),s("N",[t._v("è¿›è¡Œè®¾ç½®")])],1)]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("ã€æ€»ç»“ã€‘ï¼š")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("é’ˆå¯¹å¹¸å­˜è€…S0ï¼ŒS1åŒºçš„æ€»ç»“ï¼šå¤åˆ¶ä¹‹åæœ‰äº¤æ¢ï¼Œè°ç©ºè°æ˜¯to")])]),t._v(" "),s("li",[s("p",[t._v("å…³äºåƒåœ¾å›æ”¶ï¼šé¢‘ç¹åœ¨æ–°ç”ŸåŒºæ”¶é›†ï¼Œå¾ˆå°‘åœ¨å…»è€åŒºæ”¶é›†ï¼Œå‡ ä¹ä¸åœ¨æ°¸ä¹…åŒº/å…ƒç©ºé—´æ”¶é›†ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("80%å·¦å³çš„å¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­å°±è¢«é”€æ¯äº†ï¼Œæœç”Ÿå¤•æ­»")])])]),t._v(" "),s("h3",{attrs:{id:"ç‰¹æ®Šæƒ…å†µè®¨è®º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç‰¹æ®Šæƒ…å†µè®¨è®º"}},[t._v("#")]),t._v(" ç‰¹æ®Šæƒ…å†µè®¨è®º")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200701182422.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("Q1ï¼šSurvivoråŒºæ»¡äº†ä¼šè§¦å‘YGC/Minor GCå—ï¼Ÿ")])]),t._v(" "),s("ul",[s("li",[s("font",{attrs:{color:"red"}},[t._v("ä¸ä¼šçš„ã€‚SurvivoråŒºæ»¡äº†ä¸ä¼šè§¦å‘YGCï¼Œä½†æ˜¯å®ƒä¼šè¢«åƒåœ¾å›æ”¶ã€‚")]),t._v("å½“æ¯æ¬¡å †Edenè¿›è¡ŒYGCæ—¶ï¼Œä¼šå¯¹Suevivorä¹Ÿè¿›è¡Œåˆ¤æ–­å›æ”¶ã€‚åªä¸è¿‡åŒºåˆ«äºEdenï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯è¢«åŠ¨çš„ã€‚")],1)]),t._v(" "),s("p",[s("strong",[t._v("Q2ï¼šå½“Survivoræ»¡äº†æ—¶æ€ä¹ˆåŠï¼Ÿ")])]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœEdenå›æ”¶å®Œåï¼Œæ­¤æ—¶Survivorä¸ºæ»¡æ—¶ï¼Œå°±å°†Edenä¸­çš„å­˜æ´»å¯¹è±¡ç›´æ¥æ”¾å…¥åˆ°OldåŒºä¸­ã€‚å³ä½¿"),s("code",[t._v("age")]),t._v("æ²¡æœ‰è¾¾åˆ°é˜ˆå€¼ï¼Œä¹Ÿæœ‰å¯èƒ½ç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£ï¼ˆç†è§£ä¸ºè·¨çº§æ™‹å‡ï¼‰")])]),t._v(" "),s("p",[s("strong",[t._v("Q3ï¼šå¯¹è±¡æœ‰å¯èƒ½ä¸€åˆ›å»ºå°±æ”¾åˆ°è€å¹´ä»£å—ï¼Ÿ")])]),t._v(" "),s("ul",[s("li",[t._v("æœ‰å¯èƒ½ã€‚åœ¨YGCä¹‹åï¼Œå¯¹äºè¶…å¤§å¯¹è±¡æ¥è¯´è¿˜æ˜¯å­˜æ”¾ä¸ä¸‹ï¼Œç›´æ¥æ”¾å…¥åˆ°è€å¹´ä»£")])]),t._v(" "),s("blockquote",[s("p",[t._v("è¶…å¤§å¯¹è±¡ä¸€èˆ¬æ˜¯è¶…é•¿çš„å­—ç¬¦ä¸²ã€è¶…å¤§çš„æ•°ç»„ç­‰")])]),t._v(" "),s("p",[s("strong",[t._v("Q4ï¼šè¶…å¤§å¯¹è±¡è€å¹´ä»£ä¹Ÿæ”¾ä¸ä¸‹æ€ä¹ˆåŠï¼Ÿ")])]),t._v(" "),s("blockquote",[s("p",[t._v("é’ˆå¯¹ä¸åŠ¨æ€è°ƒæ•´å†…å­˜ç©ºé—´æœºåˆ¶çš„è™šæ‹Ÿæœº")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å…ˆå¯¹è€å¹´ä»£è¿›è¡Œ"),s("strong",[t._v("Major GC")]),t._v("ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿå­˜æ”¾ï¼Œæ˜¯åˆ™æ”¾å…¥è€å¹´ä»£")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Major GC")]),t._v("å®Œä¹‹åè¿˜æ˜¯æ”¾ä¸ä¸‹ï¼ŒæŠ›å‡º"),s("font",{attrs:{color:"red"}},[t._v("OOM")])],1)])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_3-ä»£ç è°ƒè¯•åˆ†æè¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä»£ç è°ƒè¯•åˆ†æè¯´æ˜"}},[t._v("#")]),t._v(" 3. ä»£ç è°ƒè¯•åˆ†æè¯´æ˜")]),t._v(" "),s("p",[t._v("å…‰é æ¦‚å¿µæ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€æ®µä»£ç æ¥è¯¦è§£ä¸€ä¸‹ä¸Šé¢çš„è¦ç‚¹ï¼š")]),t._v(" "),s("p",[t._v("JVMåˆ†æå·¥å…·æ˜¯ç”¨çš„JDKè‡ªå¸¦çš„"),s("strong",[t._v("jvisualvm.exe")]),t._v("å’Œç¬¬ä¸‰æ–¹çš„")]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/chongyou/p/9681868.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä½¿ç”¨jvisualvm.exeå·¥å…·æŸ¥çœ‹javaé¡¹ç›®å†…å­˜æº¢å‡º"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.ej-technologies.com/products/jprofiler/overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java Profiler - JProfiler"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("strong",[t._v("ã€æµ‹è¯•ä»£ç ã€‘")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapInstanceTest2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapInstanceTest2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapInstanceTest2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapInstanceTest2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("åœ¨å½“å‰ç±»ä¸­å£°æ˜"),s("code",[t._v("byte")]),t._v("ç±»å‹çš„å­—èŠ‚æ•°ç»„ï¼Œå¤§å°æ˜¯éšæœºçš„ï¼Œç„¶åä¸æ–­åˆ›å»ºå¹¶æ”¾å…¥åˆ°ArrayListä¸­")]),t._v(" "),s("p",[t._v("ç”±äºæ˜¯éšæœºå¤§å°ï¼Œæœ‰ä¸€äº›åˆ›å»ºçš„å¯¹è±¡å¯èƒ½æ¯”SurvivråŒºçš„ç©ºé—´è¿˜å¤§ï¼Œå¦‚ä¸‹å›¾åŠ¨å›¾æ‰€ç¤ºï¼Œå°±ç›´æ¥æ”¾å…¥åˆ°äº†OldåŒºï¼Œè¿™ä¹Ÿæ˜¯ç¬¦åˆæˆ‘ä»¬ä¸Šé¢çš„æè¿°çš„")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200702093153.gif",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200702094403.png",alt:""}})]),t._v(" "),s("p",[t._v("å½“Oldä¹Ÿæ”¾æ»¡æ—¶ï¼Œæœ€ç»ˆä¼šäº§ç”Ÿ"),s("strong",[t._v("OOM")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200702094547.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"åˆ†æè¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†æè¯´æ˜"}},[t._v("#")]),t._v(" åˆ†æè¯´æ˜")]),t._v(" "),s("p",[t._v("JProfileræŸ¥çœ‹å†…å­˜å›¾åˆ†åŒºè¯¦æƒ…ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("Edenï¼š")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200702095324.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("Oldï¼š")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200702095350.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200702095759.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒEdenåŒºä¼šæœ‰ä¸€ä¸ªå³°å€¼ï¼Œå½“å®ƒæ»¡äº†ä¹‹åå°±ä¼šè¿›è¡ŒYGCï¼Œæ­¤æ—¶Edenå†æ¬¡åˆ°è¾¾å³°åº•")])]),t._v(" "),s("li",[s("p",[t._v("S0å’ŒS1äº¤æ›¿æ‰§è¡Œ")])])]),t._v(" "),s("p",[s("mark",[s("strong",[t._v("ä¸€èˆ¬ç¨‹åºå‡ºç°OOMçš„åŸå› å°±æ˜¯è€å¹´ä»£ç©ºé—´ä¸è¶³é€ æˆçš„")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_4-minor-gcã€major-gcã€full-gc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-minor-gcã€major-gcã€full-gc"}},[t._v("#")]),t._v(" 4. Minor GCã€Major GCã€Full GC")]),t._v(" "),s("p",[t._v("JVMåœ¨è¿›è¡ŒGCæ—¶ï¼Œå¹¶éæ¯æ¬¡éƒ½å¯¹ä¸Šé¢ä¸‰ä¸ªå†…å­˜åŒºåŸŸï¼ˆæ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ–¹æ³•åŒºï¼‰ä¸€èµ·å›æ”¶çš„ï¼Œå¤§éƒ¨åˆ†éƒ½æŒ‡çš„æ˜¯æ–°ç”Ÿä»£ã€‚å› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹åˆ›å»ºå¯¹è±¡éƒ½æ˜¯åœ¨æ–°ç”Ÿä»£ï¼Œå¯¹è±¡æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œæ‰€ä»¥GCçš„é¢‘ç‡ä¼šæ¯”è¾ƒé«˜ã€‚")]),t._v(" "),s("p",[t._v("é’ˆå¯¹HotSpot VMï¼ŒGCæŒ‰ç…§å›æ”¶åŒºåŸŸä¼šåˆ’åˆ†æˆä¸¤å¤§ç±»å‹ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("éƒ¨åˆ†æ”¶é›†  Partial GC")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å…¨éƒ¨æ”¶é›†  Full GC")])])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("ã€éƒ¨åˆ†æ”¶é›†ã€‘ï¼š")]),t._v(" ä¸æ˜¯å®Œæ•´æ”¶é›†æ•´ä¸ªJavaå †çš„åƒåœ¾ï¼Œåˆåˆ†ä¸º")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GCæˆ–Yang GCï¼Œç§°è°“ä¸åŒï¼‰ï¼šåªå¯¹æ–°ç”Ÿä»£æ”¶é›†")])]),t._v(" "),s("li",[s("p",[t._v("è€å¹´ä»£æ”¶é›†ï¼ˆMajor GC / Old GCï¼‰ï¼šåªå¯¹è€å¹´ä»£æ”¶é›†")])]),t._v(" "),s("li",[s("p",[t._v("æ··åˆæ”¶é›†ï¼ˆMixed GCï¼‰ï¼šæ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£å’Œéƒ¨åˆ†è€å¹´ä»£ï¼ˆG1 GCï¼‰")])])]),t._v(" "),s("p",[s("strong",[t._v("ã€å…¨éƒ¨æ”¶é›†ã€‘ï¼š")]),t._v(" æ”¶é›†æ•´ä¸ªJavaå †å’Œæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"æ–°ç”Ÿä»£minor-gcè§¦å‘æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–°ç”Ÿä»£minor-gcè§¦å‘æœºåˆ¶"}},[t._v("#")]),t._v(" æ–°ç”Ÿä»£Minor GCè§¦å‘æœºåˆ¶")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å½“å¹´è½»ä»£ç©ºé—´ä¸è¶³æ—¶ï¼Œå°±ä¼šè§¦å‘ Minor GCï¼Œè¿™é‡Œçš„å¹´è½»ä»£æ»¡æŒ‡çš„æ˜¯Edenä»£æ»¡ï¼Œ Survivoræ»¡ä¸ä¼šå¼•å‘GCã€‚æ¯æ¬¡ Minor GCä¼šæ¸…ç†å¹´è½»ä»£çš„å†…å­˜")])]),t._v(" "),s("li",[s("p",[t._v("å› ä¸ºJavaå¯¹è±¡å¤§å¤šéƒ½å…·å¤‡æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ Minor GCéå¸¸é¢‘ç¹ï¼Œä¸€èˆ¬å›æ”¶é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«")])]),t._v(" "),s("li",[s("p",[t._v("Minor GCä¼šå¼•å‘STWï¼Œæš‚åœå…¶å®ƒç”¨æˆ·çš„çº¿ç¨‹ï¼Œç­‰åƒåœ¾å›æ”¶ç»“æŸï¼Œç”¨æˆ·çº¿ç¨‹æ‰æ¢å¤è¿è¡Œ")])])]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("p",[t._v("Javaä¸­Stop-The-Worldæœºåˆ¶ç®€ç§°STWï¼Œæ˜¯åœ¨æ‰§è¡Œåƒåœ¾æ”¶é›†ç®—æ³•æ—¶ï¼ŒJavaåº”ç”¨ç¨‹åºçš„å…¶ä»–æ‰€æœ‰çº¿ç¨‹éƒ½è¢«æŒ‚èµ·ï¼ˆé™¤äº†åƒåœ¾æ”¶é›†å¸®åŠ©å™¨ä¹‹å¤–ï¼‰ã€‚Javaä¸­ä¸€ç§å…¨å±€æš‚åœç°è±¡ï¼Œå…¨å±€åœé¡¿ï¼Œæ‰€æœ‰Javaä»£ç åœæ­¢ï¼Œnativeä»£ç å¯ä»¥æ‰§è¡Œï¼Œä½†ä¸èƒ½ä¸JVMäº¤äº’ï¼›è¿™äº›ç°è±¡å¤šåŠæ˜¯ç”±äºGCå¼•èµ·ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Minor GCæ—¶ï¼Œåˆ¶é€ åƒåœ¾çš„ç”¨æˆ·çº¿ç¨‹ä¼šæš‚åœï¼Œç­‰å¾…VM Threadsæ ‡è®°å®Œåƒåœ¾å¯¹è±¡å¹¶å›æ”¶å®Œï¼Œç”¨æˆ·çº¿ç¨‹æ‰èƒ½æ‰§è¡Œï¼Œå³ä¸ºSTW")])])])]),t._v(" "),s("h3",{attrs:{id:"è€å¹´ä»£major-gc-full-gcè§¦å‘æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è€å¹´ä»£major-gc-full-gcè§¦å‘æœºåˆ¶"}},[t._v("#")]),t._v(" è€å¹´ä»£Major GC/Full GCè§¦å‘æœºåˆ¶")]),t._v(" "),s("p",[s("strong",[t._v("Major GC ã€ Full GCå¾ˆå¤šæƒ…å†µä¸‹æ˜¯æ··åˆä½¿ç”¨çš„ï¼Œéœ€è¦å…·ä½“åˆ†è¾¨è€å¹´ä»£è¿˜æ˜¯æ•´å †æ”¶é›†ã€‚")])]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("åªæœ‰CMSæ‰ä¼šæœ‰è€å¹´ä»£å•ç‹¬æ”¶é›†çš„è¡Œä¸ºã€‚")]),t._v(" å…¶ä½™éƒ½å¯ä»¥ç†è§£ä¸ºFull GCï¼Œéƒ½æ˜¯å¯¹æ•´å †æ”¶é›†ï¼ŒMajor GC/Full GCå¯ä»¥ç†è§£ä¸ºç›¸åŒä½œç”¨")])],1),t._v(" "),s("p",[t._v("æŒ‡å‘ç”Ÿåœ¨è€å¹´ä»£çš„GCï¼Œå¯¹è±¡ä»è€å¹´ä»£æ¶ˆå¤±æ—¶ï¼Œæˆ‘ä»¬è¯´Major GCæˆ–Full GCå‘ç”Ÿäº†")]),t._v(" "),s("p",[t._v("å‡ºç°äº† Major GCï¼Œç»å¸¸ä¼šä¼´éšè‡³å°‘ä¸€æ¬¡çš„ "),s("strong",[t._v("Minor GC/YGC")])]),t._v(" "),s("blockquote",[s("p",[t._v("ä½†å¹¶éç»å¯¹çš„ï¼Œåœ¨Parallel Scavengeæ”¶é›†å™¨çš„æ”¶é›†ç­–ç•¥é‡Œå°±æœ‰ç›´æ¥è¿›è¡Œ Major GCçš„ç­–ç•¥é€‰æ‹©è¿‡ç¨‹")])]),t._v(" "),s("p",[t._v("åœ¨è€å¹´ä»£ç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šå…ˆå°è¯•è§¦å‘"),s("strong",[t._v("Minor GC")]),t._v("ã€‚å¦‚æœä¹‹åç©ºé—´è¿˜ä¸è¶³ï¼Œåˆ™è§¦å‘"),s("strong",[t._v("Major GC")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ç”±äºè€å¹´ä»£ç©ºé—´è¾ƒå¤§ï¼ŒMajor GCçš„é€Ÿåº¦ä¸€èˆ¬ä¼šæ¯” Minor GCæ…¢10å€ä»¥ä¸Šï¼ŒSTWçš„æ—¶é—´æ›´é•¿")])]),t._v(" "),s("li",[s("p",[t._v("å¦‚æœ MaJor GCåï¼Œå†…å­˜è¿˜ä¸è¶³ï¼Œå°±æŠ¥"),s("strong",[t._v("OOM")])])])]),t._v(" "),s("h3",{attrs:{id:"full-gcè§¦å‘æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#full-gcè§¦å‘æœºåˆ¶"}},[t._v("#")]),t._v(" Full GCè§¦å‘æœºåˆ¶")]),t._v(" "),s("p",[t._v("è§¦å‘Full GCæ‰§è¡Œçš„æƒ…å†µæœ‰å¦‚ä¸‹äº”ç§ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("è°ƒç”¨ "),s("code",[t._v("System.gc()")]),t._v("æ—¶ï¼Œç³»ç»Ÿå»ºè®®æ‰§è¡ŒFull GCï¼Œä½†æ˜¯ä¸å¿…ç„¶æ‰§è¡Œ")])]),t._v(" "),s("li",[s("p",[t._v("è€å¹´ä»£ç©ºé—´ä¸è¶³")])]),t._v(" "),s("li",[s("p",[t._v("æ–¹æ³•åŒºç©ºé—´ä¸è¶³")])]),t._v(" "),s("li",[s("p",[t._v("é€šè¿‡Minor GCåè¿›å…¥è€å¹´ä»£çš„å¹³å‡å¤§å°å¤§äºè€å¹´ä»£çš„å¯ç”¨å†…å­˜")])]),t._v(" "),s("li",[s("p",[t._v("å¯¹äºè¶…å¤§å¯¹è±¡ï¼Œæ–°ç”Ÿä»£æ”¾ä¸ä¸‹ï¼Œåˆ™æŠŠè¯¥å¯¹è±¡è½¬å­˜åˆ°è€å¹´ä»£ï¼Œä¸”è€å¹´ä»£çš„å¯ç”¨å†…å­˜å°äºè¯¥å¯¹è±¡å¤§å°ï¼Œå°±ä¼šè§¦å‘Full GC")])])]),t._v(" "),s("blockquote",[s("p",[t._v("Full GCæ˜¯å¼€å‘æˆ–è°ƒä¼˜ä¸­å°½é‡è¦é¿å…çš„ï¼Œè¿™æ ·æš‚æ—¶æ—¶é—´ä¼šçŸ­ä¸€äº›")])]),t._v(" "),s("h2",{attrs:{id:"_5-javaå †ä¸ºä»€ä¹ˆè¦åˆ†ä»£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-javaå †ä¸ºä»€ä¹ˆè¦åˆ†ä»£"}},[t._v("#")]),t._v(" 5. Javaå †ä¸ºä»€ä¹ˆè¦åˆ†ä»£")]),t._v(" "),s("p",[s("strong",[t._v("ç»å¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ã€‚")]),t._v(" æ–°ç”Ÿä»£å­˜æ”¾ä¸åœæ›´æ–°è¿­ä»£çš„å¯¹è±¡ï¼Œè€å¹´ä»£å­˜æ”¾å¤šæ¬¡GCåä»»ç„¶å­˜æ´»çš„å¯¹è±¡ã€‚")]),t._v(" "),s("p",[t._v("Javaå †ä¸ºä»€ä¹ˆè¦åˆ†ä»£ï¼Ÿä¸åˆ†ä»£å°±ä¸èƒ½å·¥ä½œäº†å—ï¼Ÿ")]),t._v(" "),s("p",[t._v("åˆ†ä»£çš„åŸå› æ˜¯æ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤ï¼Œæé«˜æ•ˆç‡ã€‚å°±åƒä¸€ä¸ªå¹´çº§å¯ä»¥æ”¾åˆ°ä¸€ä¸ªç­ä¹Ÿèƒ½ä¸Šè¯¾ï¼Œä½†æ˜¯äººæ•°å¤ªå¤šä¸å¥½ç®¡ç†ï¼Œæ‰€ä»¥è¦åˆ†ç­ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("åˆ†ä»£çš„å”¯ä¸€ç†ç”±å°±æ˜¯ä¼˜åŒ–GCæ€§èƒ½ã€‚")]),t._v(" å¦‚æœæ²¡æœ‰åˆ†ä»£ï¼Œåœ¨GCçš„æ—¶å€™è¦æ‰¾åˆ°å“ªäº›å¯¹è±¡æ²¡ç”¨è¿™æ ·å°±ä¼šå¯¹å †çš„æ‰€æœ‰åŒºåŸŸè¿›è¡Œæ‰«æã€‚è€Œå¾ˆå¤šå¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œå¦‚æœåˆ†ä»£çš„è¯ï¼ŒæŠŠæ–°åˆ›å»ºçš„å¯¹è±¡æ”¾åˆ°æŸä¸€åœ°æ–¹ï¼Œå½“GCçš„æ—¶å€™å…ˆæŠŠè¿™å—å­˜å‚¨â€œæœç”Ÿå¤•æ­»â€å¯¹è±¡çš„åŒºåŸŸè¿›è¡Œå›æ”¶ï¼Œè¿™æ ·å°±ä¼šè…¾å‡ºå¾ˆå¤§çš„ç©ºé—´å‡ºæ¥ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200629173208.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("GCç—›è‹¦çš„äº‹æƒ…æ˜¯å‡ºç°äº†å¾ˆå¤šå¤§å¯¹è±¡")])]),t._v(" "),s("li",[s("p",[t._v("æ›´ç—›è‹¦çš„äº‹æ˜¯å¾ˆå¤šçš„å¤§å¯¹è±¡æ˜¯æœç”Ÿå¤•æ­»çš„")])])]),t._v(" "),s("h2",{attrs:{id:"_6-ã€çº¿ç¨‹çš„tlab-å †ä¸Šä¿è¯çº¿ç¨‹å®‰å…¨ã€‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-ã€çº¿ç¨‹çš„tlab-å †ä¸Šä¿è¯çº¿ç¨‹å®‰å…¨ã€‘"}},[t._v("#")]),t._v(" 6. ã€çº¿ç¨‹çš„TLAB-å †ä¸Šä¿è¯çº¿ç¨‹å®‰å…¨ã€‘")]),t._v(" "),s("p",[s("strong",[t._v("å †ç©ºé—´ä¸€å®šæ˜¯å…±äº«çš„å—ï¼Ÿ â€”â€”â€”å¹¶ä¸æ˜¯ï¼TLEBåœ¨å †ä¸Šï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„")])]),t._v(" "),s("p",[t._v("TLABï¼ˆThread Local Allocation Bufferï¼‰ï¼Œä»"),s("strong",[t._v("å†…å­˜æ¨¡å‹")]),t._v("è€Œä¸æ˜¯åƒåœ¾æ”¶é›†çš„è§’åº¦ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("å¯¹EdenåŒºåŸŸç»§ç»­è¿›è¡Œåˆ’åˆ†")]),t._v("ï¼ŒJVMä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…äº†ä¸€ä¸ªç§æœ‰ç¼“å­˜åŒºåŸŸï¼Œå®ƒåŒ…å«åœ¨Edenç©ºé—´å†…")]),t._v(" "),s("p",[t._v("å¤šçº¿ç¨‹åŒæ—¶åˆ†é…å†…å­˜æ—¶ï¼Œä½¿ç”¨TLABå¯ä»¥é¿å…ä¸€ç³»åˆ—çš„éçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿæå‡å†…å­˜åˆ†é…çš„ååé‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¿™ç§å†…å­˜åˆ†é…æ–¹å¼ç§°ä¹‹ä¸º"),s("strong",[t._v("å¿«é€Ÿåˆ†é…ç­–ç•¥")])]),t._v(" "),s("p",[s("strong",[t._v("ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡")]),t._v("å®ä¾‹éƒ½èƒ½å¤Ÿåœ¨TLABä¸­æˆåŠŸåˆ†é…å†…å­˜ï¼Œä¸€æ—¦å¯¹è±¡åœ¨TLABç©ºé—´åˆ†é…å†…å­˜å¤±è´¥æ—¶ï¼ŒJVMå°±ä¼šå°è¯•é€šè¿‡ä½¿ç”¨"),s("strong",[t._v("åŠ é”æœºåˆ¶")]),t._v("æ¥ç¡®ä¿æ•°æ®çš„"),s("strong",[t._v("åŸå­æ€§")]),t._v("ï¼Œä»è€Œåœ¨Edenç©ºé—´ä¸­åˆ†é…å†…å­˜")]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"ä¸€äº›è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€äº›è¯´æ˜"}},[t._v("#")]),t._v(" ä¸€äº›è¯´æ˜")]),t._v(" "),s("p",[s("strong",[t._v("å †æ˜¯åˆ†é…å¯¹è±¡å­˜å‚¨çš„å”¯ä¸€é€‰æ‹©å—ï¼Ÿ")])]),t._v(" "),s("p",[t._v("åœ¨ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­å…³äºJavaå †å†…å­˜æœ‰è¿™æ ·ä¸€æ®µæè¿°ï¼š")]),t._v(" "),s("p",[t._v("éšç€JITç¼–è¯‘æœŸçš„å‘å±•ä¸é€ƒé€¸åˆ†ææŠ€æœ¯é€æ¸æˆç†Ÿï¼Œ"),s("strong",[t._v("æ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢")]),t._v("ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼\nè‡´ä¸€äº›å¾®å¦™çš„å˜åŒ–ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½åˆ†é…åˆ°å †ä¸Šä¹Ÿæ¸æ¸å˜å¾—ä¸é‚£ä¹ˆâ€œç»å¯¹â€äº†ã€‚")]),t._v(" "),s("p",[t._v("åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡æ˜¯åœ¨Javaå †ä¸­åˆ†é…å†…å­˜çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®éçš„å¸¸è¯†ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœç»è¿‡"),s("strong",[t._v("é€ƒé€¸åˆ†æ")]),t._v("ï¼ˆEscape Analysis)åå‘ç°ï¼Œ"),s("strong",[s("u",[t._v("ä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½è¢«ä¼˜åŒ–æˆæ ˆä¸Šåˆ†é…")])]),t._v("ã€‚è¿™æ ·å°±æ— éœ€åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œä¹Ÿæ— é¡»è¿›è¡Œåƒåœ¾å›æ”¶äº†ã€‚è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„"),s("strong",[t._v("å †å¤–å­˜å‚¨æŠ€æœ¯")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("é€ƒé€¸åˆ†æçš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯åˆ†æå¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå¯¹è±¡åªåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™è®¤ä¸ºæ²¡æœ‰\nå‘ç”Ÿé€ƒé€¸ã€‚å¯ä»¥åœ¨æ ˆä¸Šåˆ†é…ï¼")])])]),t._v(" "),s("li",[s("p",[t._v("å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå®ƒè¢«å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨ï¼Œåˆ™è®¤ä¸ºå‘ç”Ÿé€ƒ\né€¸ã€‚ä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–åœ°æ–¹ä¸­")])])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//use a")]),t._v("\n    a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("strong",[t._v("æ²¡æœ‰å‘ç”Ÿé€ƒé€¸çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥åˆ†é…åˆ°æ ˆä¸Šï¼Œéšç€æ–¹æ³•æ‰§è¡Œçš„ç»“æŸï¼Œæ ˆç©ºé—´è¢«ç§»é™¤")])]),t._v(" "),s("p",[t._v("ä½¿ç”¨é€ƒé€¸åˆ†æï¼Œç¼–è¯‘å™¨å¯å¯¹å¦‚ä¸‹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ ˆä¸Šåˆ†é…")]),t._v(" "),s("li",[t._v("åŒæ­¥çœç•¥")]),t._v(" "),s("li",[t._v("åˆ†ç¦»å¯¹è±¡æˆ–è€…æ ‡é‡æ›¿æ¢")])]),t._v(" "),s("p",[t._v("å †å¤–å­˜å‚¨æŠ€æœ¯ï¼ŒåŒ…æ‹¬TLEBæ˜¯ä¸ºäº†èƒ½å¤Ÿå‡å°‘GCçš„é¢‘ç‡ï¼Œé¿å…å‡ºç°åŒæ­¥é—®é¢˜ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚")])])}),[],!1,null,null,null);s.default=r.exports}}]);