(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{359:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-contentproviderç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-contentproviderç®€ä»‹"}},[t._v("#")]),t._v(" 1. ContentProviderç®€ä»‹")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210414210144.png",alt:"image-20210414210144862"}})]),t._v(" "),s("p",[t._v("å¦‚çŸ­ä¿¡åº”ç”¨åœ¨ç¼–è¾‘çŸ­ä¿¡æ—¶ï¼Œéœ€è¦æ·»åŠ è”ç³»äººç”µè¯ï¼Œä½†æ˜¯è”ç³»äººåˆ—è¡¨çš„è¡¨æ•°æ®å­˜å‚¨åœ¨åº“ä¸­ï¼›å½“å‰çš„è”ç³»äººæ•°æ®è¡¨æ˜¯ç§æœ‰çš„ï¼ŒçŸ­ä¿¡åº”ç”¨æ— æ³•è·å–åˆ°ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¸­é—´é€šè¿‡"),s("strong",[t._v("ContentProvider(å†…å®¹æä¾›è€…)"),s("strong",[t._v("æ¥è·å–åˆ°è”ç³»äººåˆ—è¡¨ï¼ŒçŸ­ä¿¡åº”ç”¨é€šè¿‡")]),t._v("ContentProvider")]),t._v("æ¥è·å–ï¼›çŸ­ä¿¡å¦‚ä½•è·å–"),s("strong",[t._v("ContentProvider")]),t._v("æš´éœ²çš„æ¥å£å‘¢ï¼Ÿé€šè¿‡"),s("strong",[t._v("ContentResolver(å†…å®¹è§£æå™¨)")]),t._v(" é€šè¿‡ "),s("code",[t._v("URI")]),t._v(" æ¥è®¿é—®ContentProvideræä¾›çš„æ¥å£")]),t._v(" "),s("h3",{attrs:{id:"_1-1-contentprovideræ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-contentprovideræ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" 1.1 ContentProvideræ˜¯ä»€ä¹ˆ")]),t._v(" "),s("p",[t._v("è¿›ç¨‹é—´ è¿›è¡Œ"),s("strong",[t._v("æ•°æ®äº¤äº’ & å…±äº«")]),t._v("ï¼Œå³è·¨è¿›ç¨‹é€šä¿¡")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210416084517.png",alt:"image-20210416084516252"}})]),t._v(" "),s("ul",[s("li",[t._v("ContentProvider=ä¸­é—´è€…è§’è‰²ï¼ˆæ¬è¿å·¥ï¼‰,çœŸæ­£å­˜å‚¨&æ“ä½œæ•°æ®çš„æ•°æ®æºè¿˜æ˜¯åŸæ¥å­˜å‚¨æ•°æ®çš„æ–¹å¼ï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ã€xmlæˆ–ç½‘ç»œï¼‰")]),t._v(" "),s("li",[t._v("æ•°æ®æºå¯ä»¥ï¼šæ•°æ®åº“ï¼ˆå¦‚Sqlite)ã€æ–‡ä»¶ã€XMLã€ç½‘ç»œç­‰ç­‰")])]),t._v(" "),s("p",[t._v("ContentProvideræ˜¯Androidå››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œ"),s("strong",[t._v("å°†æ•°æ®åº“è¡¨æ•°æ®æ“ä½œæš´éœ²ç»™å…¶ä»–åº”ç”¨è®¿é—®")]),t._v("ï¼›å…¶ä»–åº”ç”¨éœ€è¦ä½¿ç”¨"),s("strong",[t._v("ContentResolver")]),t._v("æ¥è°ƒç”¨ContentProviderçš„æ–¹æ³•ï¼Œé€šè¿‡URIè¿›è¡Œé€šä¿¡")]),t._v(" "),s("p",[t._v("ContentProvideræ˜¯ä¸€ç§æ•°æ®å…±äº«æœºåˆ¶ï¼Œå®ƒå°†"),s("strong",[t._v("å…è®¸å…¶å®ƒåº”ç”¨ç¨‹åºå¯¹è‡ªèº«åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œ")]),t._v("ï¼›")]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"_1-2-contentprovideræ‰§è¡ŒåŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-contentprovideræ‰§è¡ŒåŸç†"}},[t._v("#")]),t._v(" 1.2 ContentProvideræ‰§è¡ŒåŸç†")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210416101954.png",alt:"image-20210416101954537"}})]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"_1-3-contentproviderç›¸å…³api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-contentproviderç›¸å…³api"}},[t._v("#")]),t._v(" 1.3 ContentProviderç›¸å…³API")]),t._v(" "),s("p",[t._v("providerå¯¹è±¡åˆ›å»ºåè°ƒç”¨ï¼ˆåº”ç”¨å®‰è£…å®Œæˆæˆ–æ‰‹æœºå¯åŠ¨å®Œæˆï¼‰")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æŸ¥è¯¢æ•°æ®è¡¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cursor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" projection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sortOrder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æ’å…¥æ•°æ®è¡¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContentValues")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åˆ é™¤æ•°æ®è¡¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æ›´æ–°æ•°æ®è¡¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContentValues")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"_2-contentresolver-å†…å®¹æä¾›è€…è§£æç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-contentresolver-å†…å®¹æä¾›è€…è§£æç±»"}},[t._v("#")]),t._v(" 2. ContentResolver å†…å®¹æä¾›è€…è§£æç±»")]),t._v(" "),s("p",[t._v("ç»Ÿä¸€ç®¡ç†ä¸åŒ "),s("code",[t._v("ContentProvider")]),t._v("é—´çš„æ“ä½œ")]),t._v(" "),s("blockquote",[s("ol",[s("li",[t._v("å³é€šè¿‡ "),s("code",[t._v("URI")]),t._v(" å³å¯æ“ä½œ ä¸åŒçš„"),s("code",[t._v("ContentProvider")]),t._v(" ä¸­çš„æ•°æ®")]),t._v(" "),s("li",[t._v("å¤–éƒ¨è¿›ç¨‹é€šè¿‡ "),s("code",[t._v("ContentResolver")]),t._v("ç±» ä»è€Œä¸"),s("code",[t._v("ContentProvider")]),t._v("ç±»è¿›è¡Œäº¤äº’")])])]),t._v(" "),s("h3",{attrs:{id:"_2-1-ä¸ºä»€ä¹ˆä¸ç›´æ¥è®¿é—®contentproviderç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ä¸ºä»€ä¹ˆä¸ç›´æ¥è®¿é—®contentproviderç±»"}},[t._v("#")]),t._v(" 2.1 ä¸ºä»€ä¹ˆä¸ç›´æ¥è®¿é—®ContentProviderç±»")]),t._v(" "),s("p",[t._v("ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é€šè¿‡"),s("code",[t._v("ContentResolver")]),t._v("ç±»ä»è€Œä¸"),s("code",[t._v("ContentProvider")]),t._v("ç±»è¿›è¡Œäº¤äº’ï¼Œè€Œä¸ç›´æ¥è®¿é—®"),s("code",[t._v("ContentProvider")]),t._v("ç±»")]),t._v(" "),s("ul",[s("li",[t._v("ä¸€èˆ¬æ¥è¯´ï¼Œä¸€æ¬¾åº”ç”¨è¦ä½¿ç”¨å¤šä¸ª"),s("code",[t._v("ContentProvider")]),t._v("ï¼Œè‹¥éœ€è¦äº†è§£æ¯ä¸ª"),s("code",[t._v("ContentProvider")]),t._v("çš„ä¸åŒå®ç°ä»è€Œå†å®Œæˆæ•°æ®äº¤äº’ï¼Œ"),s("strong",[t._v("æ“ä½œæˆæœ¬é«˜ã€éš¾åº¦å¤§")])]),t._v(" "),s("li",[t._v("æ‰€ä»¥å†"),s("code",[t._v("ContentProvider")]),t._v("ç±»ä¸ŠåŠ å¤šäº†ä¸€ä¸ª "),s("code",[t._v("ContentResolver")]),t._v("ç±»å¯¹æ‰€æœ‰çš„"),s("code",[t._v("ContentProvider")]),t._v("è¿›è¡Œç»Ÿä¸€ç®¡ç†")])]),t._v(" "),s("p",[t._v("å¾—åˆ°å¯¹è±¡")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContentResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è°ƒç”¨providerè¿›è¡Œæ•°æ®åº“CRUDæ“ä½œ")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("br"),t._v(" "),s("h3",{attrs:{id:"_2-2-uri-è¯·æ±‚åœ°å€æ•°æ®çš„ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-uri-è¯·æ±‚åœ°å€æ•°æ®çš„ç±»"}},[t._v("#")]),t._v(" 2.2 URI è¯·æ±‚åœ°å€æ•°æ®çš„ç±»")]),t._v(" "),s("p",[t._v("å¾—åˆ°URIå¯¹è±¡")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" ststic "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" uriString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210415081437.png",alt:"image-20210415081437275"}})]),t._v(" "),s("p",[t._v("æ ‡å‡†URIå†™æ³•ï¼Œè¡¨ç¤ºè®¿é—®"),s("code",[t._v("top.iqqcode.app")]),t._v("è¿™ä¸ªåº”ç”¨çš„tableè¡¨ä¸­çš„æ•°æ®")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("content://top.iqqcode.app.provider/table\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å†…å®¹URIçš„æ ¼å¼ä¸»è¦å°±åªæœ‰ä»¥ä¸Šä¸¤ç§ï¼Œä»¥è·¯å¾„ç»“å°¾å°±è¡¨ç¤ºæœŸæœ›è®¿é—®è¯¥è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œä»¥idç»“å°¾å°±è¡¨ç¤ºæœŸæœ›è®¿é—®è¯¥è¡¨ä¸­æ‹¥æœ‰ç›¸åº”idçš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼æ¥åˆ†åˆ«åŒ¹é…è¿™ä¸¤ç§æ ¼å¼çš„å†…å®¹URIï¼Œè§„åˆ™å¦‚ä¸‹ã€‚")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("*")]),t._v("ï¼šè¡¨ç¤ºåŒ¹é…ä»»æ„é•¿åº¦çš„ä»»æ„å­—ç¬¦")]),t._v(" "),s("li",[s("code",[t._v("#")]),t._v("ï¼šè¡¨ç¤ºåŒ¹é…ä»»æ„é•¿åº¦çš„æ•°å­—")])]),t._v(" "),s("p",[t._v("ä¸€ä¸ªèƒ½å¤Ÿ"),s("strong",[t._v("åŒ¹é…ä»»æ„è¡¨çš„å†…å®¹")]),t._v("URIæ ¼å¼å°±å¯ä»¥å†™æˆï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("provider"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n")])])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä¸€ä¸ªèƒ½å¤Ÿ"),s("strong",[t._v("åŒ¹é…table1è¡¨ä¸­ä»»æ„ä¸€è¡Œæ•°æ®")]),t._v("çš„å†…å®¹URIæ ¼å¼å°±å¯ä»¥å†™æˆï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("provider"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("table1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("#\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"_3-ä¸‰ä¸ªè¾…åŠ©contentprovideçš„å·¥å…·ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸‰ä¸ªè¾…åŠ©contentprovideçš„å·¥å…·ç±»"}},[t._v("#")]),t._v(" 3. ä¸‰ä¸ªè¾…åŠ©ContentProvideçš„å·¥å…·ç±»")]),t._v(" "),s("h3",{attrs:{id:"_3-1-urimatcher-åŒ¹é…uriçš„å®¹å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-urimatcher-åŒ¹é…uriçš„å®¹å™¨"}},[t._v("#")]),t._v(" 3.1 UriMatcher-åŒ¹é…URIçš„å®¹å™¨")]),t._v(" "),s("p",[t._v("æ·»åŠ åˆæ³•çš„URI")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addURI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" anthority"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åŒ¹é…æŒ‡å®šçš„URIï¼Œè¿”å›åŒ¹é…ç ")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-2-contenturis-è§£æuriçš„å·¥å…·ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-contenturis-è§£æuriçš„å·¥å…·ç±»"}},[t._v("#")]),t._v(" 3.2  ContentUris-è§£æURIçš„å·¥å…·ç±»")]),t._v(" "),s("p",[t._v("è§£æURIï¼Œå¾—åˆ°å­—æ®µçš„id")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" contentUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("æ·»åŠ idåˆ°æŒ‡å®šçš„URIä¸­")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withAppendedli")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" contentUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-3-contentobserverç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-contentobserverç±»"}},[t._v("#")]),t._v(" 3.3 ContentObserverç±»")]),t._v(" "),s("p",[t._v("è§‚å¯Ÿ "),s("code",[t._v("Uri")]),t._v("å¼•èµ· "),s("code",[t._v("ContentProvider")]),t._v(" ä¸­çš„æ•°æ®å˜åŒ– & é€šçŸ¥å¤–ç•Œï¼ˆå³è®¿é—®è¯¥æ•°æ®è®¿é—®è€…ï¼‰")]),t._v(" "),s("p",[t._v("å½“"),s("code",[t._v("ContentProvider")]),t._v(" ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ˆå¢ã€åˆ  & æ”¹ï¼‰æ—¶ï¼Œå°±ä¼šè§¦å‘è¯¥ "),s("code",[t._v("ContentObserver")]),t._v("ç±»")]),t._v(" "),s("p",[t._v("å…·ä½“ä½¿ç”¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¥éª¤1ï¼šæ³¨å†Œå†…å®¹è§‚å¯Ÿè€…ContentObserver")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContentResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("registerContentObserverï¼ˆuriï¼‰ï¼›\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ContentResolverç±»è¿›è¡Œæ³¨å†Œï¼Œå¹¶æŒ‡å®šéœ€è¦è§‚å¯Ÿçš„URI")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¥éª¤2ï¼šå½“è¯¥URIçš„ContentProvideræ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥å¤–ç•Œï¼ˆå³è®¿é—®è¯¥ContentProvideræ•°æ®çš„è®¿é—®è€…ï¼‰")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserContentProvider")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContentProvider")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContentValues")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n      db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userid"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContentResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("notifyChange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šçŸ¥è®¿é—®è€…")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¥éª¤3ï¼šè§£é™¤è§‚å¯Ÿè€…")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContentResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unregisterContentObserverï¼ˆuriï¼‰ï¼›\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒæ ·éœ€è¦é€šè¿‡ContentResolverç±»è¿›è¡Œè§£é™¤")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("br"),t._v(" "),s("h2",{attrs:{id:"_4-ä½¿ç”¨provider"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä½¿ç”¨provider"}},[t._v("#")]),t._v(" 4. ä½¿ç”¨Provider")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210418153228.jpg",alt:"40787698"}})]),t._v(" "),s("p",[s("strong",[t._v("1. ç¼–å†™Contentproviderå­ç±»ï¼Œç»§æ‰¿ContentProvider")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("ä¸ªæ ¸å¿ƒæ–¹æ³• "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤–éƒ¨è¿›ç¨‹å‘ ContentProvider ä¸­æ·»åŠ æ•°æ®")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContentValues")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤–éƒ¨è¿›ç¨‹ åˆ é™¤ ContentProvider ä¸­çš„æ•°æ®")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤–éƒ¨è¿›ç¨‹æ›´æ–° ContentProvider ä¸­çš„æ•°æ®")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContentValues")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤–éƒ¨åº”ç”¨ è·å– ContentProvider ä¸­çš„æ•°æ®")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cursor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" projection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sortOrder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ã€€ \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("ä¸Šè¿°4ä¸ªæ–¹æ³•ç”±å¤–éƒ¨è¿›ç¨‹å›è°ƒï¼Œå¹¶è¿è¡Œåœ¨ContentProviderè¿›ç¨‹çš„Binderçº¿ç¨‹æ± ä¸­ï¼ˆä¸æ˜¯ä¸»çº¿ç¨‹ï¼‰")]),t._v(" "),s("p",[t._v("å­˜åœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ï¼Œéœ€è¦å®ç°çº¿ç¨‹åŒæ­¥")]),t._v(" "),s("ul",[s("li",[t._v("a. è‹¥ContentProviderçš„æ•°æ®å­˜å‚¨æ–¹å¼æ˜¯ä½¿ç”¨SQLiteï¼Œåˆ™ä¸éœ€è¦ï¼›å› ä¸ºSQLiteå†…éƒ¨å®ç°å¥½äº†çº¿ç¨‹åŒæ­¥ï¼Œè‹¥æ˜¯å¤šä¸ªSQLiteåˆ™éœ€è¦ï¼Œå› ä¸ºSQLå¯¹è±¡ä¹‹é—´æ— æ³•è¿›è¡Œçº¿ç¨‹åŒæ­¥")]),t._v(" "),s("li",[t._v("b. è‹¥ContentProviderçš„æ•°æ®å­˜å‚¨æ–¹å¼æ˜¯å†…å­˜ï¼Œåˆ™éœ€è¦è‡ªå·±å®ç°çº¿ç¨‹åŒæ­¥")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ContentProvideråˆ›å»ºå æˆ– æ‰“å¼€ç³»ç»Ÿåå…¶å®ƒè¿›ç¨‹ç¬¬ä¸€æ¬¡è®¿é—®è¯¥ContentProvideræ—¶ ç”±ç³»ç»Ÿè¿›è¡Œè°ƒç”¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ³¨ï¼šè¿è¡Œåœ¨ContentProviderè¿›ç¨‹çš„ä¸»çº¿ç¨‹ï¼Œæ•…ä¸èƒ½åšè€—æ—¶æ“ä½œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¾—åˆ°æ•°æ®ç±»å‹ï¼Œå³è¿”å›å½“å‰ Url æ‰€ä»£è¡¨æ•°æ®çš„MIMEç±»å‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[s("strong",[t._v("queryæ–¹æ³•å‚æ•°è¯´æ˜")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cursor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNull")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),t._v(" uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" projection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" selection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" selectionArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Nullable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sortOrder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("strong",[t._v("ã€æŸ¥è¯¢å‚æ•°å¯¹ç…§è¯´æ˜ã€‘")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("query()æ–¹æ³•å‚æ•°")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("å¯¹åº”SQLéƒ¨åˆ†")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("uri")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("from table_name")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŒ‡å®šæŸ¥è¯¢æŸä¸ªåº”ç”¨ç¨‹åºä¸‹çš„æŸä¸€å¼ è¡¨")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("projection")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("select column1, column2")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŒ‡å®šæŸ¥è¯¢çš„åˆ—å")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("selection")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("where column = value")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŒ‡å®š"),s("code",[t._v("where")]),t._v(" çš„çº¦æŸæ¡ä»¶")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("selectionArgs")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("-")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ä¸º"),s("code",[t._v("where")]),t._v(" ä¸­çš„å ä½ç¬¦æä¾›å…·ä½“çš„å€¼")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("sortOrder")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("order by column1, column2")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ’åºæ–¹å¼")])])])]),t._v(" "),s("p",[t._v("SQLè¯­å¥")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("selece id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ? "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ? "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("code",[t._v("String[] projection")]),t._v("  å¯¹åº” "),s("strong",[t._v("select")]),t._v(" åé¢æŸ¥è¯¢çš„å­—æ®µ")]),t._v(" "),s("p",[s("code",[t._v("String[] selectionArgs")]),t._v(" å¯¹åº” "),s("strong",[t._v("where")]),t._v(" åé¢çš„æ¡ä»¶ "),s("code",[t._v("idã€name")]),t._v("ç­‰å­—æ®µæ”¾å…¥æ•°ç»„")]),t._v(" "),s("p",[s("code",[t._v("order by")]),t._v("  å¯¹åº” "),s("strong",[t._v("sortOrder")]),t._v(" ä¸ºæ’åºè§„åˆ™")]),t._v(" "),s("p",[s("strong",[t._v("2. manifestä¸­æ³¨å†Œ")])]),t._v(" "),s("ul",[s("li",[t._v("åˆ›å»ºåœ¨"),s("code",[t._v("<application>")]),t._v("èŠ‚ç‚¹ä¸‹æ·»åŠ "),s("code",[t._v("<provider>")]),t._v("å­èŠ‚ç‚¹ï¼›")]),t._v(" "),s("li",[t._v("é…ç½®"),s("code",[t._v("android:name")]),t._v("å±æ€§ï¼ŒæŒ‡å®šContentProviderç±»ï¼›")]),t._v(" "),s("li",[t._v("é…ç½®"),s("code",[t._v("android:authorities")]),t._v("å±æ€§ï¼ŒæŒ‡å®šç”¨äºè®¿é—®æ•°æ®çš„URIçš„hostéƒ¨åˆ†ï¼›")]),t._v(" "),s("li",[t._v("é…ç½®"),s("code",[t._v("android:exported")]),t._v("å±æ€§ï¼ŒæŒ‡å®šå€¼ä¸ºtrue")])]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("provider")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("PersonProvider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("authorities")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("top.iqqcode.contentproviderbasic.PersonProvider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("\x3c!--")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("exportedæ˜¯å¦å¯è¢«å…¶ä»–åº”ç”¨è®¿é—®")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n    android:exported="true" />\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"_5-1-è¿›ç¨‹å†…é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-è¿›ç¨‹å†…é€šä¿¡"}},[t._v("#")]),t._v(" 5.1 è¿›ç¨‹å†…é€šä¿¡")]),t._v(" "),s("p",[t._v("ã€æ­¥éª¤è¯´æ˜ã€‘")]),t._v(" "),s("ol",[s("li",[t._v("åˆ›å»ºæ•°æ®åº“ç±»")]),t._v(" "),s("li",[t._v("è‡ªå®šä¹‰ "),s("code",[t._v("ContentProvider")]),t._v(" ç±»")]),t._v(" "),s("li",[t._v("æ³¨å†Œ åˆ›å»ºçš„ "),s("code",[t._v("ContentProvider")]),t._v("ç±»")]),t._v(" "),s("li",[t._v("è¿›ç¨‹å†…è®¿é—® "),s("code",[t._v("ContentProvider")]),t._v("çš„æ•°æ®")])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("Demo app02-è¿›ç¨‹é—´é€šä¿¡")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/IQQcode/MobileCoding/tree/main/Android-Base/01-FourComponents/c-ContentProvider/ContentProviderBasic01/app02_query",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸˆapp-query"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/IQQcode/MobileCoding/tree/main/Android-Base/01-FourComponents/c-ContentProvider/ContentProviderBasic01/app02_crud",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ§¨app-CRUD"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_5-2-è¿›ç¨‹å†…é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-è¿›ç¨‹å†…é€šä¿¡"}},[t._v("#")]),t._v(" 5.2 è¿›ç¨‹å†…é€šä¿¡")]),t._v(" "),s("p",[t._v("æœ¬æ–‡éœ€è¦åˆ›å»º2ä¸ªè¿›ç¨‹ï¼Œå³åˆ›å»ºä¸¤ä¸ªå·¥ç¨‹ï¼Œä½œç”¨å¦‚ä¸‹")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210418154355.png",alt:"image-20210418154355241"}})]),t._v(" "),s("h3",{attrs:{id:"è¿›ç¨‹-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿›ç¨‹-1"}},[t._v("#")]),t._v(" è¿›ç¨‹ 1")]),t._v(" "),s("p",[t._v("ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åˆ›å»ºæ•°æ®åº“ç±»")]),t._v(" "),s("li",[t._v("è‡ªå®šä¹‰ "),s("code",[t._v("ContentProvider")]),t._v(" ç±»")]),t._v(" "),s("li",[t._v("æ³¨å†Œåˆ›å»ºçš„ "),s("code",[t._v("ContentProvider")]),t._v(" ç±»")])]),t._v(" "),s("h3",{attrs:{id:"è¿›ç¨‹2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿›ç¨‹2"}},[t._v("#")]),t._v(" è¿›ç¨‹2")]),t._v(" "),s("p",[s("strong",[t._v("æ­¥éª¤1ï¼šå£°æ˜å¯è®¿é—®çš„æƒé™")])])])}),[],!1,null,null,null);s.default=e.exports}}]);