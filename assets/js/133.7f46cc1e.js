(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{461:function(t,a,e){"use strict";e.r(a);var s=e(3),r=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-listview理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-listview理解"}},[t._v("#")]),t._v(" 1. ListView理解")]),t._v(" "),a("p",[t._v("ListView是一种用来 "),a("strong",[t._v("显示多个可滑动项『item』列表")]),t._v(" 的 "),a("strong",[t._v("ViewGroup")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210315103842.png",alt:"image-20210315103752972"}})]),t._v(" "),a("p",[t._v("显示列表："),a("code",[t._v("mListView.setAdapter(adapter)")])]),t._v(" "),a("p",[t._v("需要使用 "),a("strong",[t._v("Adapter")]),t._v(" 将 "),a("strong",[t._v("集合数据")]),t._v(" 和每一个 "),a("strong",[t._v("item所对应的布局")]),t._v(" 动态适配至ListView中显示")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210315104555.png",alt:"image-20210315104555156"}})]),t._v(" "),a("p",[a("strong",[t._v("ListView继承关系")])]),t._v(" "),a("p",[a("strong",[t._v("ArrayAdapter、SimpleAdapter、SimpleCursorAdapter也是继承自BaseAdapter")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210315093933.png",alt:"image-20210315093932792"}})]),t._v(" "),a("p",[a("strong",[t._v("Adapter")])]),t._v(" "),a("ul",[a("li",[t._v("BaseAdapter："),a("strong",[t._v("显示复杂的列表")]),t._v("，集合数据可以是任意类型"),a("code",[t._v("List<Xxx>")])]),t._v(" "),a("li",[t._v("ArrayAdapter：显示文本列表，集合数据为"),a("code",[t._v("List<String>")]),t._v("或"),a("code",[t._v("String[]")])]),t._v(" "),a("li",[t._v("SimpleAdapter：显示复杂列表，数据集合必须是"),a("code",[t._v("List<Map<String,Object>>")]),t._v("类型")]),t._v(" "),a("li",[t._v("SimpleCursorAdapter：显示复杂类表，集合数据是数据库查询的结果集")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210315094654.png",alt:"image-20210315094654545"}})]),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"常用属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用属性"}},[t._v("#")]),t._v(" 常用属性")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性名称")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("divider")]),t._v(" "),a("td",[t._v("设置 分割线 的颜色")])]),t._v(" "),a("tr",[a("td",[t._v("dividerHeight")]),t._v(" "),a("td",[t._v("设置 分割线 的高度")])]),t._v(" "),a("tr",[a("td",[t._v("scrollbars")]),t._v(" "),a("td",[t._v("设置 滚动条 的隐藏或显示")])]),t._v(" "),a("tr",[a("td",[t._v("fadeScrollbars")]),t._v(" "),a("td",[t._v("设置 滚动条 的自动隐藏或显示")])]),t._v(" "),a("tr",[a("td",[t._v("entries")]),t._v(" "),a("td",[t._v("引用一个将使用在此ListView里的数组。若数组是固定的，使用此属性将比在程序中写入更为简单")])])])]),t._v(" "),a("br"),t._v(" "),a("hr"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"_2-listview工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-listview工作原理"}},[t._v("#")]),t._v(" 2. ListView工作原理")]),t._v(" "),a("h3",{attrs:{id:"本质原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本质原理"}},[t._v("#")]),t._v(" 本质原理")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ListView")]),t._v("仅作为容器（列表），用于 "),a("strong",[t._v("装载 & 显示数据")]),t._v("（即列表项"),a("code",[t._v("item")]),t._v("）")]),t._v(" "),a("li",[t._v("而容器内的具体数据（列表项"),a("code",[t._v("item")]),t._v("）则是由 适配器（"),a("code",[t._v("Adapter")]),t._v("）提供")])]),t._v(" "),a("blockquote",[a("p",[t._v("适配器（Adapter）：作为"),a("code",[t._v("View")]),t._v(" 和 数据 之间的桥梁中介，将数据映射到要展示的"),a("code",[t._v("View")]),t._v("中")])]),t._v(" "),a("ul",[a("li",[t._v("当需显示数据时，"),a("code",[t._v("ListView")]),t._v("会向"),a("code",[t._v("Adapter")]),t._v("取出数据，从而加载显示，具体如下图")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/944365-9337bc62b916d9de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/750/format/webp",alt:"img"}})]),t._v(" "),a("p",[a("strong",[t._v("结论："),a("code",[t._v("ListView")]),t._v("负责以列表的形式显示"),a("code",[t._v("Adapter")]),t._v("提供的内容")])]),t._v(" "),a("h3",{attrs:{id:"缓存原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存原理"}},[t._v("#")]),t._v(" 缓存原理")]),t._v(" "),a("blockquote",[a("p",[t._v("试想一个场景：若把所有数据集合的信息都加载到"),a("code",[t._v("ListView")]),t._v("上显示，若 "),a("code",[t._v("ListView")]),t._v("要为每个数据都创建一个视图，那么会占用非常多的内存")])]),t._v(" "),a("ul",[a("li",[t._v("为了节省空间和时间，"),a("code",[t._v("ListView")]),t._v("不会为每一个数据创建一个视图，而是采用了"),a("strong",[t._v("Recycler组件")]),t._v("，用于回收  & 复用 "),a("code",[t._v("View")])]),t._v(" "),a("li",[t._v("当屏幕需显示"),a("code",[t._v("x")]),t._v("个"),a("code",[t._v("Item")]),t._v("时，那么"),a("code",[t._v("ListView")]),t._v("会创建 "),a("code",[t._v("x+1")]),t._v("个视图；当第1个"),a("code",[t._v("Item")]),t._v("离开屏幕时，此"),a("code",[t._v("Item")]),t._v("的"),a("code",[t._v("View")]),t._v("被回收至缓存，入屏的"),a("code",[t._v("Item")]),t._v("的"),a("code",[t._v("View")]),t._v("会优先从该缓存中获取")])]),t._v(" "),a("blockquote",[a("p",[t._v("注意：")]),t._v(" "),a("ol",[a("li",[t._v("只有"),a("code",[t._v("Item")]),t._v("完全离开屏幕后才可复用，这也是为什么"),a("code",[t._v("ListView")]),t._v("要创建比屏幕需显示视图多1个的原因：缓冲 显示视图")]),t._v(" "),a("li",[t._v("即：第1个"),a("code",[t._v("Item")]),t._v("离开屏幕是有过程的，会有1个 "),a("strong",[t._v("第1个"),a("code",[t._v("Item")]),t._v("的下半部分 & 第8个"),a("code",[t._v("Item")]),t._v("上半部分同时在屏幕中显示")]),t._v("的状态，此时仍无法使用缓存的"),a("code",[t._v("View")]),t._v("，只能继续用新创建的视图"),a("code",[t._v("View")])])])]),t._v(" "),a("ul",[a("li",[t._v("实例演示\n设：屏幕只能显示5个"),a("code",[t._v("Item")]),t._v("，那么"),a("code",[t._v("ListView")]),t._v("只会创建（5+1）个"),a("code",[t._v("Item")]),t._v("的视图；当第1个"),a("code",[t._v("Item")]),t._v("完全离开屏幕后才会回收至缓存从而复用（用于显示第7个"),a("code",[t._v("Item")]),t._v("）")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https:////upload-images.jianshu.io/upload_images/944365-4eaf25bae10a75d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/685/format/webp",alt:"img"}})]),t._v(" "),a("h2",{attrs:{id:"_3-listview的基本属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-listview的基本属性"}},[t._v("#")]),t._v(" 3. ListView的基本属性")]),t._v(" "),a("h3",{attrs:{id:"生成方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成方式"}},[t._v("#")]),t._v(" 生成方式")]),t._v(" "),a("p",[t._v("生成列表视图（ListView）的方式主要有两种：")]),t._v(" "),a("ul",[a("li",[t._v("直接用ListView进行创建")]),t._v(" "),a("li",[t._v("让Activity继承ListActivity")])]),t._v(" "),a("h3",{attrs:{id:"xml文件配置信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xml文件配置信息"}},[t._v("#")]),t._v(" xml文件配置信息")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("LinearLayout")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("android")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/apk/res/android"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("tools")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://schemas.android.com/tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_width")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("match_parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_height")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("match_parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("background")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("#FFE1FF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("orientation")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("vertical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("   \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ListView")]),t._v("   \n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@+id/listView1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_width")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("match_parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("   \n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("layout_height")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("match_parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("   \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("LinearLayout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("AbsListView的常用属性和相关方法：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("说明")]),t._v(" "),a("th",{staticStyle:{"text-align":"right"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("android:choiceMode")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("列表的选择行为，默认：none没有选择行为")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("选择方式： none：不显示任何选中项  singleChoice：允许单选multipleChoice：允许多选multipleChoiceModal：允许多选 （把Activity里面adapter的第二个参数改成支持选择的布局）")])]),t._v(" "),a("tr",[a("td",[t._v("android:drawSelectorOnTop")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("如果该属性设置为true，选中的列表项将会显示在上面")])]),t._v(" "),a("tr",[a("td",[t._v("android:listSelector")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("为点击到的Item设置图片")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("如果该属性设置为true，选中的列表项将会显示在上面")])]),t._v(" "),a("tr",[a("td",[t._v("android：fastScrollEnabled")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设置是否允许快速滚动")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("如果该属性设置为true，将会显示滚动图标，并允许用户拖动该滚动图标进行快速滚动。")])]),t._v(" "),a("tr",[a("td",[t._v("android：listSelector")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("指定被选中的列表项上绘制的Drawable")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})]),t._v(" "),a("tr",[a("td",[t._v("android：scrollingCache")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("滚动时是否使用缓存")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("如果设置为true，则在滚动时将会使用缓存")])]),t._v(" "),a("tr",[a("td",[t._v("android：stackFromBottom")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设置是否从底端开始排列列表项")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})]),t._v(" "),a("tr",[a("td",[t._v("android：transcriptMode")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("指定列表添加新的选项的时候，是否自动滑动到底部，显示新的选项。")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("disabled：取消transcriptMode模式；默认的normal：当接受到数据集合改变的通知，并且仅仅当最后一个选项已经显示在屏幕的时候，自动滑动到底部。 alwaysScroll：无论当前列表显示什么选项，列表将会自动滑动到底部显示最新的选项。")])])])]),t._v(" "),a("p",[t._v("Listview提供的XML属性：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("XML属性")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("说明")]),t._v(" "),a("th",{staticStyle:{"text-align":"right"}},[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("android:divider")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设置List列表项的分隔条（可用颜色分割，也可用图片（Drawable）分割")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("不设置列表之间的分割线，可设置属性为@null")])]),t._v(" "),a("tr",[a("td",[t._v("android:dividerHeight")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("用于设置分隔条的高度")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})]),t._v(" "),a("tr",[a("td",[t._v("android:background属性")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设置列表的背景")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})]),t._v(" "),a("tr",[a("td",[t._v("android：entries")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("指定一个数组资源，Android将根据该数组资源来生成ListView")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})]),t._v(" "),a("tr",[a("td",[t._v("android：footerDividerEnabled")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("如果设置成false，则不在footer View之前绘制分隔条")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})]),t._v(" "),a("tr",[a("td",[t._v("andorid：headerDividerEnabled")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("如果设置成false，则不再header View之前绘制分隔条")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}})])])]),t._v(" "),a("br"),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("[1]Carson_Ho.Android：ListView与AdapterView全面解析[EB/OL].https://www.jianshu.com/p/4e8e4fd13cf7.")])])}),[],!1,null,null,null);a.default=r.exports}}]);